<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 6 Exploratory data analysis | Conservation funding does not track drivers of biodiversity loss</title>
  <meta name="description" content="Section 6 Exploratory data analysis | Conservation funding does not track drivers of biodiversity loss" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 6 Exploratory data analysis | Conservation funding does not track drivers of biodiversity loss" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Section 6 Exploratory data analysis | Conservation funding does not track drivers of biodiversity loss" />
  <meta name="github-repo" content="vjjan91/conservation-spending" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 6 Exploratory data analysis | Conservation funding does not track drivers of biodiversity loss" />
  
  <meta name="twitter:description" content="Section 6 Exploratory data analysis | Conservation funding does not track drivers of biodiversity loss" />
  

<meta name="author" content="Vijay Ramesh1*, Jay Schoen1, Michael Levin1, Pratik Dubal2, Rochelle Thomas1, Sebastian Heilpern1, Jared Meek1, Pooja Choksi1, Don J Melnick1, Sara Kross1&quot;" />


<meta name="date" content="2020-09-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="post-processing-of-grants-following-validation.html"/>
<link rel="next" href="threat-mismatch-calculations.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#attribution"><i class="fa fa-check"></i><b>1.1</b> Attribution</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.2</b> Data access</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.3</b> Data processing</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#affiliations"><i class="fa fa-check"></i><b>1.4</b> Affiliations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="pre-processing-and-filtering-of-grants.html"><a href="pre-processing-and-filtering-of-grants.html"><i class="fa fa-check"></i><b>2</b> Pre-processing and filtering of grants</a></li>
<li class="chapter" data-level="3" data-path="stopword-filtering.html"><a href="stopword-filtering.html"><i class="fa fa-check"></i><b>3</b> Stopword filtering</a></li>
<li class="chapter" data-level="4" data-path="preparation-of-a-final-dataframe-of-classified-grants.html"><a href="preparation-of-a-final-dataframe-of-classified-grants.html"><i class="fa fa-check"></i><b>4</b> Preparation of a final dataframe of classified grants</a></li>
<li class="chapter" data-level="5" data-path="post-processing-of-grants-following-validation.html"><a href="post-processing-of-grants-following-validation.html"><i class="fa fa-check"></i><b>5</b> Post-processing of grants following validation</a></li>
<li class="chapter" data-level="6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>6</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="7" data-path="threat-mismatch-calculations.html"><a href="threat-mismatch-calculations.html"><i class="fa fa-check"></i><b>7</b> Threat-mismatch calculations</a></li>
<li class="chapter" data-level="8" data-path="temporal-trends.html"><a href="temporal-trends.html"><i class="fa fa-check"></i><b>8</b> Temporal trends</a></li>
<li class="chapter" data-level="9" data-path="taxononmic-groupsthreats-mismatch.html"><a href="taxononmic-groupsthreats-mismatch.html"><i class="fa fa-check"></i><b>9</b> Taxononmic groups/Threats mismatch</a></li>
<li class="chapter" data-level="10" data-path="network-analysis.html"><a href="network-analysis.html"><i class="fa fa-check"></i><b>10</b> Network Analysis</a><ul>
<li class="chapter" data-level="10.1" data-path="network-analysis.html"><a href="network-analysis.html#pie-charts"><i class="fa fa-check"></i><b>10.1</b> Pie Charts</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Conservation funding does not track drivers of biodiversity loss</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exploratory-data-analysis" class="section level1">
<h1><span class="header-section-number">Section 6</span> Exploratory data analysis</h1>
<p>Here, we will carry out exploratory data analysis of grants to obtain a sense of how money has been allocated across threat and taxonomic groups.</p>
<ol style="list-style-type: decimal">
<li>Dealing with grants that were classified into multiple categories</li>
</ol>
<p>The code below governs the way we dealt with multiple, potentially overlapping categories on individual grants. The general format is as follows:</p>
<ul>
<li>If a grant description had two keyword matches with two sub-categories of the same category (e.g. threat_climate &amp; threat_energytransport), it was classified into a joint sub-category (threat_climate_energytransport).</li>
<li>Grants that were classified into three or more sub-categories within a category (e.g. threat_climate &amp; threat_energytransport &amp; threat_pollution) were classified into a sub-category labeled as “other” (e.g. threat_other).</li>
</ul>
<p>Read in the post-processed grants for analysis</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">dat<span class="fl">.1</span> &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;data</span><span class="ch">\\</span><span class="st">post-processed-grants-for-analysis.csv&#39;</span>)</a></code></pre></div>
<p>Here, we built dummy variables that take the sum of our binary classification data across the columns of each broader category.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">dat<span class="fl">.1</span> &lt;-<span class="st"> </span>dat<span class="fl">.1</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Class =</span> <span class="kw">rowSums</span>(.[,<span class="dv">11</span><span class="op">:</span><span class="kw">length</span>(.)])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Thr =</span> <span class="kw">rowSums</span>(.[<span class="dv">37</span><span class="op">:</span><span class="dv">42</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Act =</span> <span class="kw">rowSums</span>(.[<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Hab =</span> <span class="kw">rowSums</span>(.[<span class="kw">c</span>(<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">28</span>)])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Tax =</span> <span class="kw">rowSums</span>(.[<span class="dv">30</span><span class="op">:</span><span class="dv">36</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Bio =</span> <span class="kw">rowSums</span>(.[<span class="dv">19</span><span class="op">:</span><span class="dv">20</span>]))</a></code></pre></div>
<p>Multiple threat categories</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">threat &lt;-<span class="st"> </span>dat<span class="fl">.1</span>[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">37</span><span class="op">:</span><span class="dv">42</span>)]</a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3">threat &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sumAcross =</span> cat_threat_climate <span class="op">+</span><span class="st"> </span>cat_threat_energytransport <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">           </span>cat_threat_habitat <span class="op">+</span><span class="st"> </span>cat_threat_inv_spec <span class="op">+</span><span class="st"> </span>cat_threat_overexp <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="st">           </span>cat_threat_pollution) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb10-8" title="8"></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co"># Checking number of grants/money for multiple threat category grants</span></a>
<a class="sourceLine" id="cb10-10" title="10">tot_threat &lt;-<span class="st"> </span><span class="kw">sum</span>(threat<span class="op">$</span>Grant.Amount, <span class="dt">na.rm =</span> T) </a>
<a class="sourceLine" id="cb10-11" title="11"></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co"># Four or more threats retained all grants</span></a>
<a class="sourceLine" id="cb10-13" title="13">threat4 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-14" title="14"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb10-15" title="15"><span class="kw">nrow</span>(threat4)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb10-16" title="16"><span class="kw">sum</span>(threat4<span class="op">$</span>Grant.Amount,<span class="dt">na.rm =</span> T)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb10-17" title="17"></a>
<a class="sourceLine" id="cb10-18" title="18"></a>
<a class="sourceLine" id="cb10-19" title="19"><span class="co"># Three threats retains 99.3% of the money</span></a>
<a class="sourceLine" id="cb10-20" title="20">threat3 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-21" title="21"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb10-22" title="22"><span class="kw">nrow</span>(threat3)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb10-23" title="23"><span class="kw">sum</span>(threat3<span class="op">$</span>Grant.Amount,<span class="dt">na.rm =</span> T)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb10-24" title="24"></a>
<a class="sourceLine" id="cb10-25" title="25"><span class="co"># Two threats retained 96% of the money</span></a>
<a class="sourceLine" id="cb10-26" title="26">threat2 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-27" title="27"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb10-28" title="28"><span class="kw">nrow</span>(threat2)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb10-29" title="29"><span class="kw">sum</span>(threat2<span class="op">$</span>Grant.Amount, <span class="dt">na.rm =</span> T)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb10-30" title="30"></a>
<a class="sourceLine" id="cb10-31" title="31"><span class="co"># Unique threat categories retained 80.3% of the money</span></a>
<a class="sourceLine" id="cb10-32" title="32">threat1 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-33" title="33"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb10-34" title="34"><span class="kw">nrow</span>(threat1)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb10-35" title="35"><span class="kw">sum</span>(threat1<span class="op">$</span>Grant.Amount,<span class="dt">na.rm =</span> T)<span class="op">/</span>tot_threat</a></code></pre></div>
<p>Plot multiple threat categories and grants</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">n_threats &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb11-2" title="2">n_threat_grants &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">nrow</span>(threat1), </a>
<a class="sourceLine" id="cb11-3" title="3">                  <span class="kw">nrow</span>(threat2) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(threat1), </a>
<a class="sourceLine" id="cb11-4" title="4">                  <span class="kw">nrow</span>(threat3) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(threat2),</a>
<a class="sourceLine" id="cb11-5" title="5">                  <span class="kw">nrow</span>(threat4) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(threat3))</a>
<a class="sourceLine" id="cb11-6" title="6"></a>
<a class="sourceLine" id="cb11-7" title="7">threats &lt;-<span class="st"> </span><span class="kw">data.frame</span>(n_threats, n_threat_grants)</a>
<a class="sourceLine" id="cb11-8" title="8"></a>
<a class="sourceLine" id="cb11-9" title="9">fig_threats_grants &lt;-<span class="st"> </span><span class="kw">ggplot</span>(threats, <span class="kw">aes</span>(<span class="dt">x =</span> n_threats, <span class="dt">y =</span> n_threat_grants)) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Number of grants across multiple Threat Categories&quot;</span>,</a>
<a class="sourceLine" id="cb11-12" title="12">       <span class="dt">x=</span><span class="st">&quot;Number of threat categories&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Number of grants&quot;</span>)</a>
<a class="sourceLine" id="cb11-13" title="13"></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co"># save as png</span></a>
<a class="sourceLine" id="cb11-15" title="15"><span class="kw">ggsave</span>(fig_threats_grants, <span class="dt">filename =</span> <span class="st">&quot;figs/fig_threats_grants.png&quot;</span>, </a>
<a class="sourceLine" id="cb11-16" title="16">       <span class="dt">height =</span> <span class="dv">4</span>, <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">device =</span> <span class="kw">png</span>(), <span class="dt">dpi =</span> <span class="dv">300</span>); <span class="kw">dev.off</span>()</a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># show exported image</span></a>
<a class="sourceLine" id="cb12-2" title="2">knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;figs/fig_threats_grants.png&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figs/fig_threats_grants.png" alt="Number of grants that were classified into one or more categories of threat" width="\textwidth" />
<p class="caption">
(#fig:export_fig_threats_grants)Number of grants that were classified into one or more categories of threat
</p>
</div>
<p>Following the above analysis, we decided to retain grants classified across multiple threat categories for the network analysis.</p>
<p>Below we visualize overall funding provided by the top 1000 grantmakers (Supplementary Fig S1 - Accumulation of Funding Across Top Grantmakers)</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># Create donor ranks</span></a>
<a class="sourceLine" id="cb13-2" title="2">donor_Rank &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;Top 50&quot;</span>, <span class="st">&quot;Top 100&quot;</span>, <span class="st">&quot;Top 200&quot;</span>, <span class="st">&quot;Top 300&quot;</span>, <span class="st">&quot;Top 400&quot;</span>, <span class="st">&quot;Top 500&quot;</span>, <span class="st">&quot;Top 600&quot;</span>, <span class="st">&quot;Top 700&quot;</span>, <span class="st">&quot;Top 800&quot;</span>, <span class="st">&quot;Top 900&quot;</span>, <span class="st">&quot;Top 1000&quot;</span>)</a>
<a class="sourceLine" id="cb13-3" title="3"></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="co"># The values below were calculated by summing funding for each of the above donor ranks</span></a>
<a class="sourceLine" id="cb13-5" title="5">sum &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">14396513202</span>, <span class="dv">16440571398</span>, <span class="dv">18171144637</span>, <span class="dv">18975986509</span>, <span class="dv">19490663536</span>, <span class="dv">19851261916</span>, <span class="dv">20128241008</span>, <span class="dv">20348022885</span>, <span class="dv">20525790876</span>, <span class="dv">20670921174</span>, <span class="dv">20793224389</span>)</a>
<a class="sourceLine" id="cb13-6" title="6">sum_mildiv &lt;-<span class="st"> </span>sum<span class="op">/</span><span class="dv">1000000</span></a>
<a class="sourceLine" id="cb13-7" title="7">axis_Order &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>)</a>
<a class="sourceLine" id="cb13-8" title="8"></a>
<a class="sourceLine" id="cb13-9" title="9">sum.data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(donor_Rank, sum, sum_mildiv, axis_Order)</a>
<a class="sourceLine" id="cb13-10" title="10"></a>
<a class="sourceLine" id="cb13-11" title="11">fig_topGrantmakers_funding &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> sum.data,</a>
<a class="sourceLine" id="cb13-12" title="12">                    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> axis_Order,</a>
<a class="sourceLine" id="cb13-13" title="13">                                  <span class="dt">y =</span>  sum_mildiv,</a>
<a class="sourceLine" id="cb13-14" title="14">                                  <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="st">  </span><span class="kw">geom_area</span>(<span class="kw">aes</span>(<span class="dt">y=</span><span class="kw">ifelse</span>(sum_mildiv<span class="op">&gt;=</span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>sum_mildiv<span class="op">&lt;</span><span class="st"> </span><span class="fl">19851.26</span>, sum_mildiv, <span class="fl">19851.26</span>)), <span class="dt">fill=</span><span class="st">&quot;#696969&quot;</span>, <span class="dt">alpha =</span> <span class="fl">.4</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="st">  </span><span class="kw">ylim</span>(<span class="dv">0</span>, <span class="dv">21500</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-18" title="18"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb13-19" title="19"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Grantmaker Group&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-20" title="20"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Sum ($1,000,000USD)&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-21" title="21"><span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;Top 50&quot;</span>, <span class="st">&quot;Top 100&quot;</span>, <span class="st">&quot;Top 200&quot;</span>, <span class="st">&quot;Top 300&quot;</span>, <span class="st">&quot;Top 400&quot;</span>, <span class="st">&quot;Top 500&quot;</span>, <span class="st">&quot;Top 600&quot;</span>, <span class="st">&quot;Top 700&quot;</span>, <span class="st">&quot;Top 800&quot;</span>, <span class="st">&quot;Top 900&quot;</span>, <span class="st">&quot;Top 1000&quot;</span>))</a>
<a class="sourceLine" id="cb13-22" title="22"></a>
<a class="sourceLine" id="cb13-23" title="23"><span class="co"># save as png</span></a>
<a class="sourceLine" id="cb13-24" title="24"><span class="kw">ggsave</span>(fig_topGrantmakers_funding, <span class="dt">filename =</span> <span class="st">&quot;figs/fig_topGrantmakers_funding.png&quot;</span>, </a>
<a class="sourceLine" id="cb13-25" title="25">       <span class="dt">height =</span> <span class="dv">4</span>, <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">device =</span> <span class="kw">png</span>(), <span class="dt">dpi =</span> <span class="dv">300</span>); <span class="kw">dev.off</span>()</a></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># show exported image</span></a>
<a class="sourceLine" id="cb14-2" title="2">knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;figs/fig_topGrantmakers_funding.png&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figs/fig_topGrantmakers_funding.png" alt="Accumulation curve of the funding in our dataset across the top 1000 grantmakers. The shaded region encompasses the amount of funding captured by the top 500 grantmakers, which represents more than 95% of the total amount of funding." width="\textwidth" />
<p class="caption">
(#fig:export_fig_topGrantmakers_funding)Accumulation curve of the funding in our dataset across the top 1000 grantmakers. The shaded region encompasses the amount of funding captured by the top 500 grantmakers, which represents more than 95% of the total amount of funding.
</p>
</div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="post-processing-of-grants-following-validation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="threat-mismatch-calculations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vjjan91/conservation-spending/edit/master/05_exploratory-data-analysis-funding.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
