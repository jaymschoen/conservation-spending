<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Multi-category Filtering | Conservation funding does not track drivers of biodiversity loss</title>
  <meta name="description" content="Section 4 Multi-category Filtering | Conservation funding does not track drivers of biodiversity loss" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Multi-category Filtering | Conservation funding does not track drivers of biodiversity loss" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Section 4 Multi-category Filtering | Conservation funding does not track drivers of biodiversity loss" />
  <meta name="github-repo" content="vjjan91/conservation-spending" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Multi-category Filtering | Conservation funding does not track drivers of biodiversity loss" />
  
  <meta name="twitter:description" content="Section 4 Multi-category Filtering | Conservation funding does not track drivers of biodiversity loss" />
  

<meta name="author" content="Vijay Ramesh1*, Jay Schoen1, Michael Levin1, Pratik Dubal2, Rochelle Thomas1, Sebastian Heilpern1, Jared Meek1, Pooja Choksi1, Don J Melnick1, Sara Kross1&quot;" />


<meta name="date" content="2020-09-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="filtering.html"/>
<link rel="next" href="data-analysis-and-visualization-datavis.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#attribution"><i class="fa fa-check"></i><b>1.1</b> Attribution</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.2</b> Data access</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.3</b> Data processing</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#affiliations"><i class="fa fa-check"></i><b>1.4</b> Affiliations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="pre-processing-and-filtering-of-grants.html"><a href="pre-processing-and-filtering-of-grants.html"><i class="fa fa-check"></i><b>2</b> Pre-processing and filtering of grants</a><ul>
<li class="chapter" data-level="2.1" data-path="pre-processing-and-filtering-of-grants.html"><a href="pre-processing-and-filtering-of-grants.html#here-we-will-filter-our-list-our-grants-using-our-pre-processing-phrases-and-use-our-list-of-keywords-to-carry-out-our-rule-based-classification"><i class="fa fa-check"></i><b>2.1</b> Here, we will filter our list our grants using our pre-processing phrases and use our list of keywords to carry out our rule-based classification</a></li>
<li class="chapter" data-level="2.2" data-path="pre-processing-and-filtering-of-grants.html"><a href="pre-processing-and-filtering-of-grants.html#preprocessing-to-remove-grants-which-are-empty-operating-support-etc."><i class="fa fa-check"></i><b>2.2</b> Preprocessing to remove grants which are empty, operating support, etc.</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="filtering.html"><a href="filtering.html"><i class="fa fa-check"></i><b>3</b> Post-Validation Filtering</a><ul>
<li class="chapter" data-level="3.1" data-path="filtering.html"><a href="filtering.html#fixing-algorithm-errors-discovered-post-validation"><i class="fa fa-check"></i><b>3.1</b> Fixing algorithm errors discovered post-validation</a></li>
<li class="chapter" data-level="3.2" data-path="filtering.html"><a href="filtering.html#remove-grants-with-no-associated-dollar-amount"><i class="fa fa-check"></i><b>3.2</b> Remove grants with no associated dollar amount</a></li>
<li class="chapter" data-level="3.3" data-path="filtering.html"><a href="filtering.html#filtering-aquariumzoo-grants"><i class="fa fa-check"></i><b>3.3</b> Filtering Aquarium/Zoo Grants</a></li>
<li class="chapter" data-level="3.4" data-path="filtering.html"><a href="filtering.html#here-we-will-use-a-list-of-stopwords-to-further-refine-our-output-from-our-classification"><i class="fa fa-check"></i><b>3.4</b> Here, we will use a list of stopwords to further refine our output from our classification</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="multiCatFilter.html"><a href="multiCatFilter.html"><i class="fa fa-check"></i><b>4</b> Multi-category Filtering</a><ul>
<li class="chapter" data-level="4.1" data-path="multiCatFilter.html"><a href="multiCatFilter.html#adding-category-sum-columns"><i class="fa fa-check"></i><b>4.1</b> Adding Category Sum columns</a></li>
<li class="chapter" data-level="4.2" data-path="multiCatFilter.html"><a href="multiCatFilter.html#export-multi-category-file"><i class="fa fa-check"></i><b>4.2</b> Export Multi-category file</a><ul>
<li class="chapter" data-level="4.2.1" data-path="multiCatFilter.html"><a href="multiCatFilter.html#multi-category-filtering-habitat-categories"><i class="fa fa-check"></i><b>4.2.1</b> Multi-category Filtering: Habitat Categories</a></li>
<li class="chapter" data-level="4.2.2" data-path="multiCatFilter.html"><a href="multiCatFilter.html#multi-category-filtering-bio-categories"><i class="fa fa-check"></i><b>4.2.2</b> Multi-category Filtering: Bio Categories</a></li>
<li class="chapter" data-level="4.2.3" data-path="multiCatFilter.html"><a href="multiCatFilter.html#multi-category-filtering-action-categories"><i class="fa fa-check"></i><b>4.2.3</b> Multi-category Filtering: Action Categories</a></li>
<li class="chapter" data-level="4.2.4" data-path="multiCatFilter.html"><a href="multiCatFilter.html#multi-category-filtering-threat-categories"><i class="fa fa-check"></i><b>4.2.4</b> Multi-category Filtering: Threat Categories</a></li>
<li class="chapter" data-level="4.2.5" data-path="multiCatFilter.html"><a href="multiCatFilter.html#multi-category-filtering-taxa-category"><i class="fa fa-check"></i><b>4.2.5</b> Multi-category Filtering: Taxa Category</a></li>
<li class="chapter" data-level="4.2.6" data-path="multiCatFilter.html"><a href="multiCatFilter.html#export-multi-category-data-for-analysis-and-visualization"><i class="fa fa-check"></i><b>4.2.6</b> Export Multi-Category Data for Analysis and Visualization</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="multiCatFilter.html"><a href="multiCatFilter.html#preparing-a-final-datafame-for-analysis-of-threats-taxonomic-groups-and-proportion-of-funding"><i class="fa fa-check"></i><b>4.3</b> Preparing a final datafame for analysis of threats, taxonomic groups and proportion of funding</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html"><i class="fa fa-check"></i><b>5</b> Data Analysis and Visualization {dataVis}</a><ul>
<li class="chapter" data-level="5.1" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#exploratory-visuals"><i class="fa fa-check"></i><b>5.1</b> Exploratory Visuals</a><ul>
<li class="chapter" data-level="5.1.1" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#grants-with-no-keywords"><i class="fa fa-check"></i><b>5.1.1</b> Grants with No Keywords</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#all-grants-with-funding"><i class="fa fa-check"></i><b>5.1.2</b> All Grants with Funding</a></li>
<li class="chapter" data-level="5.1.3" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#bio-subset"><i class="fa fa-check"></i><b>5.1.3</b> Bio Subset</a></li>
<li class="chapter" data-level="5.1.4" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#money-data"><i class="fa fa-check"></i><b>5.1.4</b> Money Data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#manuscript-figures"><i class="fa fa-check"></i><b>5.2</b> Manuscript Figures</a><ul>
<li class="chapter" data-level="5.2.1" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#figure-1-proportion-of-money-vs.-species-threatened"><i class="fa fa-check"></i><b>5.2.1</b> Figure 1: Proportion of Money vs. Species Threatened</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#figure-2-amount-of-money-allocated-across-unique-threat-categories-per-year"><i class="fa fa-check"></i><b>5.2.2</b> Figure 2: Amount of Money Allocated Across Unique Threat Categories per Year</a></li>
<li class="chapter" data-level="5.2.3" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#figure-3-taxathreat-maxwell-comparison"><i class="fa fa-check"></i><b>5.2.3</b> Figure 3: Taxa/Threat Maxwell Comparison</a></li>
<li class="chapter" data-level="5.2.4" data-path="data-analysis-and-visualization-datavis.html"><a href="data-analysis-and-visualization-datavis.html#figure-4-network-analysis"><i class="fa fa-check"></i><b>5.2.4</b> Figure 4: Network Analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="figure-4-threats-network-analysis.html"><a href="figure-4-threats-network-analysis.html"><i class="fa fa-check"></i><b>6</b> Figure 4: Threats Network Analysis</a><ul>
<li class="chapter" data-level="6.1" data-path="figure-4-threats-network-analysis.html"><a href="figure-4-threats-network-analysis.html#threat-category-overlap"><i class="fa fa-check"></i><b>6.1</b> Threat Category Overlap</a></li>
<li class="chapter" data-level="6.2" data-path="figure-4-threats-network-analysis.html"><a href="figure-4-threats-network-analysis.html#pie-charts"><i class="fa fa-check"></i><b>6.2</b> Pie Charts</a><ul>
<li class="chapter" data-level="6.2.1" data-path="figure-4-threats-network-analysis.html"><a href="figure-4-threats-network-analysis.html#of-threats-within-threat-categories-number-of-grants-not"><i class="fa fa-check"></i><b>6.2.1</b> # of Threats within Threat categories (number of grants, not $)</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="figure-4-threats-network-analysis.html"><a href="figure-4-threats-network-analysis.html#supplemental-figures"><i class="fa fa-check"></i><b>6.3</b> Supplemental Figures</a><ul>
<li class="chapter" data-level="6.3.1" data-path="figure-4-threats-network-analysis.html"><a href="figure-4-threats-network-analysis.html#figure-s1-total-biodiversityclimate-change-grantmaking-by-top-1000-grantmakers"><i class="fa fa-check"></i><b>6.3.1</b> Figure S1: Total Biodiversity/Climate Change Grantmaking by Top 1000 Grantmakers</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Conservation funding does not track drivers of biodiversity loss</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="multiCatFilter" class="section level1">
<h1><span class="header-section-number">Section 4</span> Multi-category Filtering</h1>
<p>The code below governs the way we dealt with multiple, potentially overlapping categories on individual grants. The general format is as follows:</p>
<ol style="list-style-type: decimal">
<li>Grants with &gt;2 independent classfications (i.e. habitat_terrestrial, habitat_marine, and habitat_freshwater) are reclassified as “other” within their broader categories (i.e. habitat_other).<br />
</li>
<li>Grants with 2 independent classifications (i.e. habitat_terrestrial and habitat_marine) are classified into a separate, joint classification within their broader categories (i.e. habitat_MarineTerrestrial).<br />
</li>
<li>Those grants with shared independent and joint classifications default to the joint category described above.</li>
</ol>
<div id="adding-category-sum-columns" class="section level2">
<h2><span class="header-section-number">4.1</span> Adding Category Sum columns</h2>
<p>The above rules are built on dummy variables that take the sum of our binary classification data across the columns of each broader category.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">dat<span class="fl">.1</span> &lt;-<span class="st"> </span>dat<span class="fl">.1</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Class =</span> <span class="kw">rowSums</span>(.[,<span class="dv">11</span><span class="op">:</span><span class="kw">length</span>(.)])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Thr =</span> <span class="kw">rowSums</span>(.[<span class="dv">37</span><span class="op">:</span><span class="dv">42</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Act =</span> <span class="kw">rowSums</span>(.[<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Hab =</span> <span class="kw">rowSums</span>(.[<span class="kw">c</span>(<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">28</span>)])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Tax =</span> <span class="kw">rowSums</span>(.[<span class="dv">30</span><span class="op">:</span><span class="dv">36</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Bio =</span> <span class="kw">rowSums</span>(.[<span class="dv">19</span><span class="op">:</span><span class="dv">20</span>]))</a></code></pre></div>
</div>
<div id="export-multi-category-file" class="section level2">
<h2><span class="header-section-number">4.2</span> Export Multi-category file</h2>
<p>The foundation of this multi-category dataset is exported prior to the full multi-category processing to provide a dataset more suited to the network analysis.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="co"># Export file before category mutli-category processing for network analysis</span></a>
<a class="sourceLine" id="cb8-2" title="2">dat.<span class="fl">1.</span>multi &lt;-<span class="st"> </span>dat<span class="fl">.1</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">write_csv</span>(dat.<span class="fl">1.</span>multi, <span class="st">&quot;~/Desktop/master_output_data_analysis_v15_mutlicategories.csv&quot;</span>)</a></code></pre></div>
<div id="multi-category-filtering-habitat-categories" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Multi-category Filtering: Habitat Categories</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">hab &lt;-<span class="st"> </span>dat<span class="fl">.1</span>[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">22</span><span class="op">:</span><span class="dv">28</span>)]</a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co"># Marine-Terrestrial</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_marine[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hab<span class="op">$</span>cat_habitat_terrestrial[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-6" title="6">    hab<span class="op">$</span>cat_habitat_MarineTerrestrial[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-7" title="7">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_MarineTerrestrial[i] <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-8" title="8">    hab<span class="op">$</span>cat_habitat_marine[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-9" title="9">    hab<span class="op">$</span>cat_habitat_terrestrial[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-10" title="10">  }</a>
<a class="sourceLine" id="cb9-11" title="11">}</a>
<a class="sourceLine" id="cb9-12" title="12"></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co"># Marine-Freshwater</span></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb9-15" title="15">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_marine[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hab<span class="op">$</span>cat_habitat_freshwater[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-16" title="16">    hab<span class="op">$</span>cat_habitat_FreshwaterMarine[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-17" title="17">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_FreshwaterMarine[i] <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-18" title="18">    hab<span class="op">$</span>cat_habitat_marine[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-19" title="19">    hab<span class="op">$</span>cat_habitat_freshwater[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-20" title="20">  }</a>
<a class="sourceLine" id="cb9-21" title="21">}</a>
<a class="sourceLine" id="cb9-22" title="22"></a>
<a class="sourceLine" id="cb9-23" title="23"><span class="co"># Freshwater-Terrestrial  </span></a>
<a class="sourceLine" id="cb9-24" title="24"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb9-25" title="25">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_terrestrial[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hab<span class="op">$</span>cat_habitat_freshwater[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-26" title="26">    hab<span class="op">$</span>cat_habitat_FreshwaterTerrestrial[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-27" title="27">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_FreshwaterTerrestrial[i] <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-28" title="28">    hab<span class="op">$</span>cat_habitat_terrestrial[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-29" title="29">    hab<span class="op">$</span>cat_habitat_freshwater[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-30" title="30">  }</a>
<a class="sourceLine" id="cb9-31" title="31">}</a>
<a class="sourceLine" id="cb9-32" title="32"></a>
<a class="sourceLine" id="cb9-33" title="33"><span class="co">## Check</span></a>
<a class="sourceLine" id="cb9-34" title="34"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_other)</a>
<a class="sourceLine" id="cb9-35" title="35"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_terrestrial)</a>
<a class="sourceLine" id="cb9-36" title="36"></a>
<a class="sourceLine" id="cb9-37" title="37"><span class="co"># Habitat other (&gt;2 categories)</span></a>
<a class="sourceLine" id="cb9-38" title="38"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb9-39" title="39">  <span class="cf">if</span>(<span class="kw">sum</span>(hab[i,<span class="kw">c</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">15</span>,<span class="dv">17</span>)]) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb9-40" title="40">    hab<span class="op">$</span>cat_habitat_other[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb9-41" title="41">    hab[i, <span class="kw">c</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">15</span>,<span class="dv">17</span>)] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb9-42" title="42">  }</a>
<a class="sourceLine" id="cb9-43" title="43">}</a>
<a class="sourceLine" id="cb9-44" title="44"></a>
<a class="sourceLine" id="cb9-45" title="45"><span class="co">## Check</span></a>
<a class="sourceLine" id="cb9-46" title="46"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_other)</a>
<a class="sourceLine" id="cb9-47" title="47"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_terrestrial)</a>
<a class="sourceLine" id="cb9-48" title="48"></a>
<a class="sourceLine" id="cb9-49" title="49"></a>
<a class="sourceLine" id="cb9-50" title="50"><span class="co"># If hab_other, no other habitat classification</span></a>
<a class="sourceLine" id="cb9-51" title="51"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb9-52" title="52">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_other[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-53" title="53">    hab[i,<span class="kw">c</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">15</span>,<span class="dv">17</span>)] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb9-54" title="54">  }</a>
<a class="sourceLine" id="cb9-55" title="55">}  </a>
<a class="sourceLine" id="cb9-56" title="56"></a>
<a class="sourceLine" id="cb9-57" title="57"><span class="co">## Check</span></a>
<a class="sourceLine" id="cb9-58" title="58"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_other)</a>
<a class="sourceLine" id="cb9-59" title="59"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_terrestrial)</a>
<a class="sourceLine" id="cb9-60" title="60"><span class="kw">sum</span>(dat<span class="fl">.1</span><span class="op">$</span>cat_habitat_freshwater)</a>
<a class="sourceLine" id="cb9-61" title="61"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_freshwater) <span class="co"># Huge change in freshwater number here, showing freshwater classified with other categories a lot</span></a>
<a class="sourceLine" id="cb9-62" title="62"></a>
<a class="sourceLine" id="cb9-63" title="63"></a>
<a class="sourceLine" id="cb9-64" title="64"><span class="co">### Join filtered habitat columns with original data</span></a>
<a class="sourceLine" id="cb9-65" title="65">data.final &lt;-<span class="st"> </span>dat<span class="fl">.1</span> </a>
<a class="sourceLine" id="cb9-66" title="66"><span class="kw">names</span>(data.final)</a>
<a class="sourceLine" id="cb9-67" title="67">data.final[,<span class="dv">22</span><span class="op">:</span><span class="dv">28</span>] &lt;-<span class="st"> </span>hab[,<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>]</a>
<a class="sourceLine" id="cb9-68" title="68"></a>
<a class="sourceLine" id="cb9-69" title="69"><span class="co"># Check</span></a>
<a class="sourceLine" id="cb9-70" title="70"><span class="kw">sum</span>(dat<span class="fl">.1</span><span class="op">$</span>cat_habitat_freshwater)</a>
<a class="sourceLine" id="cb9-71" title="71"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_habitat_freshwater)</a></code></pre></div>
</div>
<div id="multi-category-filtering-bio-categories" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Multi-category Filtering: Bio Categories</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">data.final &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cat_bio_ecosys_species =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">## Filling cells</span></a>
<a class="sourceLine" id="cb10-5" title="5"></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_bio_ecosys)</a>
<a class="sourceLine" id="cb10-8" title="8"></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-10" title="10">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_bio_ecosys[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_bio_species[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-11" title="11">    data.final<span class="op">$</span>cat_bio_ecosys_species[i]=<span class="dv">1</span></a>
<a class="sourceLine" id="cb10-12" title="12">    data.final<span class="op">$</span>cat_bio_ecosys[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-13" title="13">    data.final<span class="op">$</span>cat_bio_species[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-14" title="14">  }</a>
<a class="sourceLine" id="cb10-15" title="15">}</a>
<a class="sourceLine" id="cb10-16" title="16"></a>
<a class="sourceLine" id="cb10-17" title="17"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-18" title="18"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_bio_ecosys)</a>
<a class="sourceLine" id="cb10-19" title="19"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_bio_ecosys_species)</a></code></pre></div>
</div>
<div id="multi-category-filtering-action-categories" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Multi-category Filtering: Action Categories</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">act &lt;-<span class="st"> </span>data.final[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">17</span>)]</a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3">act &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sumAcross =</span> cat_act_area <span class="op">+</span><span class="st"> </span>cat_act_community <span class="op">+</span><span class="st"> </span>cat_act_edu <span class="op">+</span><span class="st"> </span>cat_act_funding <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">           </span>cat_act_policy <span class="op">+</span><span class="st"> </span>cat_act_research <span class="op">+</span><span class="st"> </span>cat_act_restor) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb11-7" title="7"></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co"># Checking number of grants/money for multiple action category grants</span></a>
<a class="sourceLine" id="cb11-9" title="9">tot_act &lt;-<span class="st"> </span><span class="kw">sum</span>(act<span class="op">$</span>Grant.Amount) <span class="co"># total = </span></a>
<a class="sourceLine" id="cb11-10" title="10"></a>
<a class="sourceLine" id="cb11-11" title="11">act5 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb11-13" title="13"><span class="kw">nrow</span>(act5)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb11-14" title="14"><span class="kw">sum</span>(act5<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb11-15" title="15"><span class="co"># Retained 99.95% of grants, 99.98% of money</span></a>
<a class="sourceLine" id="cb11-16" title="16"></a>
<a class="sourceLine" id="cb11-17" title="17">act4 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-18" title="18"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb11-19" title="19"><span class="kw">nrow</span>(act4)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb11-20" title="20"><span class="kw">sum</span>(act4<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb11-21" title="21"><span class="co"># Retained 99.46% of grants, 99.70% of money</span></a>
<a class="sourceLine" id="cb11-22" title="22"></a>
<a class="sourceLine" id="cb11-23" title="23">act3 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-24" title="24"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb11-25" title="25"><span class="kw">nrow</span>(act3)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb11-26" title="26"><span class="kw">sum</span>(act3<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb11-27" title="27"><span class="co"># Retained 97.63% of grants, 98.64% of money</span></a>
<a class="sourceLine" id="cb11-28" title="28"></a>
<a class="sourceLine" id="cb11-29" title="29">act2 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-30" title="30"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-31" title="31"><span class="kw">nrow</span>(act2)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb11-32" title="32"><span class="kw">sum</span>(act2<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb11-33" title="33"><span class="co"># Retained 90.97% of grants, 91.96% of money</span></a>
<a class="sourceLine" id="cb11-34" title="34"></a>
<a class="sourceLine" id="cb11-35" title="35">act1 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-36" title="36"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb11-37" title="37"><span class="kw">nrow</span>(act1)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb11-38" title="38"><span class="kw">sum</span>(act1<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb11-39" title="39"><span class="co"># Retained 67.42% of grants, 67.28% of money</span></a>
<a class="sourceLine" id="cb11-40" title="40"></a>
<a class="sourceLine" id="cb11-41" title="41"></a>
<a class="sourceLine" id="cb11-42" title="42">n_actions &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb11-43" title="43">n_act_grants &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">nrow</span>(act1), </a>
<a class="sourceLine" id="cb11-44" title="44">              <span class="kw">nrow</span>(act2) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(act1), </a>
<a class="sourceLine" id="cb11-45" title="45">              <span class="kw">nrow</span>(act3) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(act2),</a>
<a class="sourceLine" id="cb11-46" title="46">              <span class="kw">nrow</span>(act4) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(act3),</a>
<a class="sourceLine" id="cb11-47" title="47">              <span class="kw">nrow</span>(act5) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(act4))</a>
<a class="sourceLine" id="cb11-48" title="48"></a>
<a class="sourceLine" id="cb11-49" title="49">actions &lt;-<span class="st"> </span><span class="kw">data.frame</span>(n_actions, n_act_grants)</a>
<a class="sourceLine" id="cb11-50" title="50"><span class="kw">ggplot</span>(actions, <span class="kw">aes</span>(<span class="dt">x =</span> n_actions, <span class="dt">y =</span> n_act_grants)) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-51" title="51"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb11-52" title="52"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;# Grants in Multiple Action Categories&quot;</span>)</a>
<a class="sourceLine" id="cb11-53" title="53"></a>
<a class="sourceLine" id="cb11-54" title="54"></a>
<a class="sourceLine" id="cb11-55" title="55"><span class="co">## &gt;2 category grants into (act_other)</span></a>
<a class="sourceLine" id="cb11-56" title="56"></a>
<a class="sourceLine" id="cb11-57" title="57">act_other &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-58" title="58"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sum_act =</span> cat_act_area <span class="op">+</span><span class="st"> </span>cat_act_community <span class="op">+</span><span class="st"> </span>cat_act_edu <span class="op">+</span><span class="st"> </span>cat_act_funding <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-59" title="59"><span class="st">           </span>cat_act_policy <span class="op">+</span><span class="st"> </span>cat_act_research <span class="op">+</span><span class="st"> </span>cat_act_restor) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-60" title="60"><span class="st">  </span><span class="kw">filter</span>(sum_act <span class="op">&gt;</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-61" title="61"></a>
<a class="sourceLine" id="cb11-62" title="62"></a>
<a class="sourceLine" id="cb11-63" title="63"><span class="co">## Adding 2-action categories and other</span></a>
<a class="sourceLine" id="cb11-64" title="64">data.final &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-65" title="65"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cat_act_area_comm =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-66" title="66">         <span class="dt">cat_act_area_edu =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-67" title="67">         <span class="dt">cat_act_area_funding =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-68" title="68">         <span class="dt">cat_act_area_policy =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-69" title="69">         <span class="dt">cat_act_area_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-70" title="70">         <span class="dt">cat_act_area_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-71" title="71">         <span class="dt">cat_act_community_edu =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-72" title="72">         <span class="dt">cat_act_community_funding =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-73" title="73">         <span class="dt">cat_act_community_policy =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-74" title="74">         <span class="dt">cat_act_community_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-75" title="75">         <span class="dt">cat_act_community_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-76" title="76">         <span class="dt">cat_act_edu_funding =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-77" title="77">         <span class="dt">cat_act_edu_policy =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-78" title="78">         <span class="dt">cat_act_edu_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-79" title="79">         <span class="dt">cat_act_edu_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-80" title="80">         <span class="dt">cat_act_funding_policy =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-81" title="81">         <span class="dt">cat_act_funding_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-82" title="82">         <span class="dt">cat_act_funding_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-83" title="83">         <span class="dt">cat_act_policy_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-84" title="84">         <span class="dt">cat_act_policy_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-85" title="85">         <span class="dt">cat_act_research_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb11-86" title="86">         <span class="dt">cat_act_other =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb11-87" title="87"></a>
<a class="sourceLine" id="cb11-88" title="88"></a>
<a class="sourceLine" id="cb11-89" title="89"><span class="co">#### Filling Multiple Action cells ####</span></a>
<a class="sourceLine" id="cb11-90" title="90"></a>
<a class="sourceLine" id="cb11-91" title="91"><span class="co">## Other Actions (&gt;2 classifications)</span></a>
<a class="sourceLine" id="cb11-92" title="92"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-93" title="93"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research)</a>
<a class="sourceLine" id="cb11-94" title="94"></a>
<a class="sourceLine" id="cb11-95" title="95"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)) {</a>
<a class="sourceLine" id="cb11-96" title="96">  <span class="cf">if</span>(<span class="kw">sum</span>(data.final[i,<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>]) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb11-97" title="97">    data.final<span class="op">$</span>cat_act_other[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb11-98" title="98">    data.final[i,<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb11-99" title="99">  }</a>
<a class="sourceLine" id="cb11-100" title="100">}</a>
<a class="sourceLine" id="cb11-101" title="101"></a>
<a class="sourceLine" id="cb11-102" title="102"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-103" title="103"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research)</a>
<a class="sourceLine" id="cb11-104" title="104"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_other) <span class="co"># matches nrow of act_other DF</span></a>
<a class="sourceLine" id="cb11-105" title="105"></a>
<a class="sourceLine" id="cb11-106" title="106"></a>
<a class="sourceLine" id="cb11-107" title="107"><span class="co">## Area + Community</span></a>
<a class="sourceLine" id="cb11-108" title="108"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-109" title="109"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-110" title="110"></a>
<a class="sourceLine" id="cb11-111" title="111"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-112" title="112">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-113" title="113">    data.final<span class="op">$</span>cat_act_area_comm[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-114" title="114">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_comm[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-115" title="115">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-116" title="116">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-117" title="117">  }</a>
<a class="sourceLine" id="cb11-118" title="118">}</a>
<a class="sourceLine" id="cb11-119" title="119"></a>
<a class="sourceLine" id="cb11-120" title="120"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-121" title="121"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-122" title="122"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_comm)</a>
<a class="sourceLine" id="cb11-123" title="123"></a>
<a class="sourceLine" id="cb11-124" title="124"></a>
<a class="sourceLine" id="cb11-125" title="125"><span class="co">## Area + Education</span></a>
<a class="sourceLine" id="cb11-126" title="126"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-127" title="127"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-128" title="128"></a>
<a class="sourceLine" id="cb11-129" title="129"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-130" title="130">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-131" title="131">    data.final<span class="op">$</span>cat_act_area_edu[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-132" title="132">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_edu[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-133" title="133">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-134" title="134">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-135" title="135">  }</a>
<a class="sourceLine" id="cb11-136" title="136">}</a>
<a class="sourceLine" id="cb11-137" title="137"></a>
<a class="sourceLine" id="cb11-138" title="138"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-139" title="139"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-140" title="140"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_edu)</a>
<a class="sourceLine" id="cb11-141" title="141"></a>
<a class="sourceLine" id="cb11-142" title="142"></a>
<a class="sourceLine" id="cb11-143" title="143"><span class="co">## Area + Funding</span></a>
<a class="sourceLine" id="cb11-144" title="144"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-145" title="145"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-146" title="146"></a>
<a class="sourceLine" id="cb11-147" title="147"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-148" title="148">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-149" title="149">    data.final<span class="op">$</span>cat_act_area_funding[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-150" title="150">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-151" title="151">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-152" title="152">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-153" title="153">  }</a>
<a class="sourceLine" id="cb11-154" title="154">}</a>
<a class="sourceLine" id="cb11-155" title="155"></a>
<a class="sourceLine" id="cb11-156" title="156"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-157" title="157"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-158" title="158"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_funding)</a>
<a class="sourceLine" id="cb11-159" title="159"></a>
<a class="sourceLine" id="cb11-160" title="160"></a>
<a class="sourceLine" id="cb11-161" title="161"><span class="co">## Area + Policy</span></a>
<a class="sourceLine" id="cb11-162" title="162"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-163" title="163"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-164" title="164"></a>
<a class="sourceLine" id="cb11-165" title="165"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-166" title="166">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-167" title="167">    data.final<span class="op">$</span>cat_act_area_policy[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-168" title="168">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-169" title="169">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-170" title="170">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-171" title="171">  }</a>
<a class="sourceLine" id="cb11-172" title="172">}</a>
<a class="sourceLine" id="cb11-173" title="173"></a>
<a class="sourceLine" id="cb11-174" title="174"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-175" title="175"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-176" title="176"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_policy)</a>
<a class="sourceLine" id="cb11-177" title="177"></a>
<a class="sourceLine" id="cb11-178" title="178"></a>
<a class="sourceLine" id="cb11-179" title="179"><span class="co">## Area + Research</span></a>
<a class="sourceLine" id="cb11-180" title="180"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-181" title="181"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-182" title="182"></a>
<a class="sourceLine" id="cb11-183" title="183"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-184" title="184">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-185" title="185">    data.final<span class="op">$</span>cat_act_area_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-186" title="186">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-187" title="187">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-188" title="188">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-189" title="189">  }</a>
<a class="sourceLine" id="cb11-190" title="190">}</a>
<a class="sourceLine" id="cb11-191" title="191"></a>
<a class="sourceLine" id="cb11-192" title="192"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-193" title="193"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-194" title="194"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_research)</a>
<a class="sourceLine" id="cb11-195" title="195"></a>
<a class="sourceLine" id="cb11-196" title="196"></a>
<a class="sourceLine" id="cb11-197" title="197"><span class="co">## Area + Restoration</span></a>
<a class="sourceLine" id="cb11-198" title="198"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-199" title="199"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-200" title="200"></a>
<a class="sourceLine" id="cb11-201" title="201"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-202" title="202">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-203" title="203">    data.final<span class="op">$</span>cat_act_area_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-204" title="204">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-205" title="205">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-206" title="206">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-207" title="207">  }</a>
<a class="sourceLine" id="cb11-208" title="208">}</a>
<a class="sourceLine" id="cb11-209" title="209"></a>
<a class="sourceLine" id="cb11-210" title="210"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-211" title="211"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb11-212" title="212"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_restor)</a>
<a class="sourceLine" id="cb11-213" title="213"></a>
<a class="sourceLine" id="cb11-214" title="214"></a>
<a class="sourceLine" id="cb11-215" title="215"><span class="co">## Community + Education</span></a>
<a class="sourceLine" id="cb11-216" title="216"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-217" title="217"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-218" title="218"></a>
<a class="sourceLine" id="cb11-219" title="219"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-220" title="220">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-221" title="221">    data.final<span class="op">$</span>cat_act_community_edu[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-222" title="222">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_edu[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-223" title="223">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-224" title="224">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-225" title="225">  }</a>
<a class="sourceLine" id="cb11-226" title="226">}</a>
<a class="sourceLine" id="cb11-227" title="227"></a>
<a class="sourceLine" id="cb11-228" title="228"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-229" title="229"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-230" title="230"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_edu)</a>
<a class="sourceLine" id="cb11-231" title="231"></a>
<a class="sourceLine" id="cb11-232" title="232"></a>
<a class="sourceLine" id="cb11-233" title="233"><span class="co">## Community + Funding</span></a>
<a class="sourceLine" id="cb11-234" title="234"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-235" title="235"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-236" title="236"></a>
<a class="sourceLine" id="cb11-237" title="237"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-238" title="238">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-239" title="239">    data.final<span class="op">$</span>cat_act_community_funding[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-240" title="240">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-241" title="241">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-242" title="242">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-243" title="243">  }</a>
<a class="sourceLine" id="cb11-244" title="244">}</a>
<a class="sourceLine" id="cb11-245" title="245"></a>
<a class="sourceLine" id="cb11-246" title="246"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-247" title="247"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-248" title="248"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_funding)</a>
<a class="sourceLine" id="cb11-249" title="249"></a>
<a class="sourceLine" id="cb11-250" title="250"></a>
<a class="sourceLine" id="cb11-251" title="251"><span class="co">## Community + Policy</span></a>
<a class="sourceLine" id="cb11-252" title="252"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-253" title="253"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-254" title="254"></a>
<a class="sourceLine" id="cb11-255" title="255"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-256" title="256">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-257" title="257">    data.final<span class="op">$</span>cat_act_community_policy[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-258" title="258">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-259" title="259">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-260" title="260">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-261" title="261">  }</a>
<a class="sourceLine" id="cb11-262" title="262">}</a>
<a class="sourceLine" id="cb11-263" title="263"></a>
<a class="sourceLine" id="cb11-264" title="264"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-265" title="265"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-266" title="266"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_policy)</a>
<a class="sourceLine" id="cb11-267" title="267"></a>
<a class="sourceLine" id="cb11-268" title="268"></a>
<a class="sourceLine" id="cb11-269" title="269"><span class="co">## Community + Research</span></a>
<a class="sourceLine" id="cb11-270" title="270"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-271" title="271"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-272" title="272"></a>
<a class="sourceLine" id="cb11-273" title="273"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-274" title="274">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-275" title="275">    data.final<span class="op">$</span>cat_act_community_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-276" title="276">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-277" title="277">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-278" title="278">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-279" title="279">  }</a>
<a class="sourceLine" id="cb11-280" title="280">}</a>
<a class="sourceLine" id="cb11-281" title="281"></a>
<a class="sourceLine" id="cb11-282" title="282"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-283" title="283"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-284" title="284"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_research)</a>
<a class="sourceLine" id="cb11-285" title="285"></a>
<a class="sourceLine" id="cb11-286" title="286"></a>
<a class="sourceLine" id="cb11-287" title="287"><span class="co">## Community + Restoration</span></a>
<a class="sourceLine" id="cb11-288" title="288"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-289" title="289"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-290" title="290"></a>
<a class="sourceLine" id="cb11-291" title="291"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-292" title="292">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-293" title="293">    data.final<span class="op">$</span>cat_act_community_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-294" title="294">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-295" title="295">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-296" title="296">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-297" title="297">  }</a>
<a class="sourceLine" id="cb11-298" title="298">}</a>
<a class="sourceLine" id="cb11-299" title="299"></a>
<a class="sourceLine" id="cb11-300" title="300"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-301" title="301"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb11-302" title="302"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_restor)</a>
<a class="sourceLine" id="cb11-303" title="303"></a>
<a class="sourceLine" id="cb11-304" title="304"></a>
<a class="sourceLine" id="cb11-305" title="305"><span class="co">## Education + Funding</span></a>
<a class="sourceLine" id="cb11-306" title="306"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-307" title="307"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb11-308" title="308"></a>
<a class="sourceLine" id="cb11-309" title="309"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-310" title="310">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-311" title="311">    data.final<span class="op">$</span>cat_act_edu_funding[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-312" title="312">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-313" title="313">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-314" title="314">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-315" title="315">  }</a>
<a class="sourceLine" id="cb11-316" title="316">}</a>
<a class="sourceLine" id="cb11-317" title="317"></a>
<a class="sourceLine" id="cb11-318" title="318"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-319" title="319"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb11-320" title="320"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu_funding)</a>
<a class="sourceLine" id="cb11-321" title="321"></a>
<a class="sourceLine" id="cb11-322" title="322"></a>
<a class="sourceLine" id="cb11-323" title="323"><span class="co">## Education + Policy</span></a>
<a class="sourceLine" id="cb11-324" title="324"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-325" title="325"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb11-326" title="326"></a>
<a class="sourceLine" id="cb11-327" title="327"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-328" title="328">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-329" title="329">    data.final<span class="op">$</span>cat_act_edu_policy[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-330" title="330">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-331" title="331">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-332" title="332">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-333" title="333">  }</a>
<a class="sourceLine" id="cb11-334" title="334">}</a>
<a class="sourceLine" id="cb11-335" title="335"></a>
<a class="sourceLine" id="cb11-336" title="336"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-337" title="337"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb11-338" title="338"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu_policy)</a>
<a class="sourceLine" id="cb11-339" title="339"></a>
<a class="sourceLine" id="cb11-340" title="340"></a>
<a class="sourceLine" id="cb11-341" title="341"><span class="co">## Education + Research</span></a>
<a class="sourceLine" id="cb11-342" title="342"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-343" title="343"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb11-344" title="344"></a>
<a class="sourceLine" id="cb11-345" title="345"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-346" title="346">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-347" title="347">    data.final<span class="op">$</span>cat_act_edu_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-348" title="348">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-349" title="349">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-350" title="350">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-351" title="351">  }</a>
<a class="sourceLine" id="cb11-352" title="352">}</a>
<a class="sourceLine" id="cb11-353" title="353"></a>
<a class="sourceLine" id="cb11-354" title="354"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-355" title="355"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb11-356" title="356"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu_research)</a>
<a class="sourceLine" id="cb11-357" title="357"></a>
<a class="sourceLine" id="cb11-358" title="358"></a>
<a class="sourceLine" id="cb11-359" title="359"><span class="co">## Education + Restoration</span></a>
<a class="sourceLine" id="cb11-360" title="360"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-361" title="361"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb11-362" title="362"></a>
<a class="sourceLine" id="cb11-363" title="363"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-364" title="364">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-365" title="365">    data.final<span class="op">$</span>cat_act_edu_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-366" title="366">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-367" title="367">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-368" title="368">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-369" title="369">  }</a>
<a class="sourceLine" id="cb11-370" title="370">}</a>
<a class="sourceLine" id="cb11-371" title="371"></a>
<a class="sourceLine" id="cb11-372" title="372"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-373" title="373"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb11-374" title="374"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu_restor)</a>
<a class="sourceLine" id="cb11-375" title="375"></a>
<a class="sourceLine" id="cb11-376" title="376"></a>
<a class="sourceLine" id="cb11-377" title="377"><span class="co">## Funding + Policy</span></a>
<a class="sourceLine" id="cb11-378" title="378"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-379" title="379"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb11-380" title="380"></a>
<a class="sourceLine" id="cb11-381" title="381"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-382" title="382">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-383" title="383">    data.final<span class="op">$</span>cat_act_funding_policy[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-384" title="384">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-385" title="385">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-386" title="386">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-387" title="387">  }</a>
<a class="sourceLine" id="cb11-388" title="388">}</a>
<a class="sourceLine" id="cb11-389" title="389"></a>
<a class="sourceLine" id="cb11-390" title="390"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-391" title="391"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb11-392" title="392"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding_policy)</a>
<a class="sourceLine" id="cb11-393" title="393"></a>
<a class="sourceLine" id="cb11-394" title="394"></a>
<a class="sourceLine" id="cb11-395" title="395"><span class="co">## Funding + Research</span></a>
<a class="sourceLine" id="cb11-396" title="396"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-397" title="397"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb11-398" title="398"></a>
<a class="sourceLine" id="cb11-399" title="399"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-400" title="400">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-401" title="401">    data.final<span class="op">$</span>cat_act_funding_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-402" title="402">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-403" title="403">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-404" title="404">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-405" title="405">  }</a>
<a class="sourceLine" id="cb11-406" title="406">}</a>
<a class="sourceLine" id="cb11-407" title="407"></a>
<a class="sourceLine" id="cb11-408" title="408"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-409" title="409"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb11-410" title="410"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding_research)</a>
<a class="sourceLine" id="cb11-411" title="411"></a>
<a class="sourceLine" id="cb11-412" title="412"></a>
<a class="sourceLine" id="cb11-413" title="413"><span class="co">## Funding + Restoration</span></a>
<a class="sourceLine" id="cb11-414" title="414"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-415" title="415"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb11-416" title="416"></a>
<a class="sourceLine" id="cb11-417" title="417"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-418" title="418">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-419" title="419">    data.final<span class="op">$</span>cat_act_funding_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-420" title="420">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-421" title="421">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-422" title="422">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-423" title="423">  }</a>
<a class="sourceLine" id="cb11-424" title="424">}</a>
<a class="sourceLine" id="cb11-425" title="425"></a>
<a class="sourceLine" id="cb11-426" title="426"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-427" title="427"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb11-428" title="428"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding_restor)</a>
<a class="sourceLine" id="cb11-429" title="429"></a>
<a class="sourceLine" id="cb11-430" title="430"></a>
<a class="sourceLine" id="cb11-431" title="431"><span class="co">## Policy + Research</span></a>
<a class="sourceLine" id="cb11-432" title="432"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-433" title="433"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy)</a>
<a class="sourceLine" id="cb11-434" title="434"></a>
<a class="sourceLine" id="cb11-435" title="435"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-436" title="436">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-437" title="437">    data.final<span class="op">$</span>cat_act_policy_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-438" title="438">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_policy_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-439" title="439">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-440" title="440">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-441" title="441">  }</a>
<a class="sourceLine" id="cb11-442" title="442">}</a>
<a class="sourceLine" id="cb11-443" title="443"></a>
<a class="sourceLine" id="cb11-444" title="444"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-445" title="445"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy)</a>
<a class="sourceLine" id="cb11-446" title="446"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy_research)</a>
<a class="sourceLine" id="cb11-447" title="447"></a>
<a class="sourceLine" id="cb11-448" title="448"></a>
<a class="sourceLine" id="cb11-449" title="449"><span class="co">## Policy + Restoration</span></a>
<a class="sourceLine" id="cb11-450" title="450"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-451" title="451"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy)</a>
<a class="sourceLine" id="cb11-452" title="452"></a>
<a class="sourceLine" id="cb11-453" title="453"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-454" title="454">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-455" title="455">    data.final<span class="op">$</span>cat_act_policy_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-456" title="456">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_policy_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-457" title="457">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-458" title="458">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-459" title="459">  }</a>
<a class="sourceLine" id="cb11-460" title="460">}</a>
<a class="sourceLine" id="cb11-461" title="461"></a>
<a class="sourceLine" id="cb11-462" title="462"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-463" title="463"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy)</a>
<a class="sourceLine" id="cb11-464" title="464"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy_restor)</a>
<a class="sourceLine" id="cb11-465" title="465"></a>
<a class="sourceLine" id="cb11-466" title="466"></a>
<a class="sourceLine" id="cb11-467" title="467"><span class="co">## Research + Restoration</span></a>
<a class="sourceLine" id="cb11-468" title="468"><span class="co">#test</span></a>
<a class="sourceLine" id="cb11-469" title="469"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research)</a>
<a class="sourceLine" id="cb11-470" title="470"></a>
<a class="sourceLine" id="cb11-471" title="471"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb11-472" title="472">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-473" title="473">    data.final<span class="op">$</span>cat_act_research_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb11-474" title="474">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_research_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb11-475" title="475">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-476" title="476">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb11-477" title="477">  }</a>
<a class="sourceLine" id="cb11-478" title="478">}</a>
<a class="sourceLine" id="cb11-479" title="479"></a>
<a class="sourceLine" id="cb11-480" title="480"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb11-481" title="481"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research)</a>
<a class="sourceLine" id="cb11-482" title="482"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research_restor)</a></code></pre></div>
</div>
<div id="multi-category-filtering-threat-categories" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Multi-category Filtering: Threat Categories</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">threat &lt;-<span class="st"> </span>data.final[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">37</span><span class="op">:</span><span class="dv">42</span>)]</a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3">threat &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sumAcross =</span> cat_threat_climate <span class="op">+</span><span class="st"> </span>cat_threat_energytransport <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="st">           </span>cat_threat_habitat <span class="op">+</span><span class="st"> </span>cat_threat_inv_spec <span class="op">+</span><span class="st"> </span>cat_threat_overexp <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="st">           </span>cat_threat_pollution) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb12-8" title="8"></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co"># Checking number of grants/money for multiple threation category grants</span></a>
<a class="sourceLine" id="cb12-10" title="10">tot_threat &lt;-<span class="st"> </span><span class="kw">sum</span>(threat<span class="op">$</span>Grant.Amount) <span class="co"># total = </span></a>
<a class="sourceLine" id="cb12-11" title="11"></a>
<a class="sourceLine" id="cb12-12" title="12">threat4 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb12-14" title="14"><span class="kw">nrow</span>(threat4)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb12-15" title="15"><span class="kw">sum</span>(threat4<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb12-16" title="16"><span class="co"># Retained all grants</span></a>
<a class="sourceLine" id="cb12-17" title="17"></a>
<a class="sourceLine" id="cb12-18" title="18">threat3 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb12-20" title="20"><span class="kw">nrow</span>(threat3)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb12-21" title="21"><span class="kw">sum</span>(threat3<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb12-22" title="22"><span class="co"># Retained 99.75% of grants, 99.21% of money</span></a>
<a class="sourceLine" id="cb12-23" title="23"></a>
<a class="sourceLine" id="cb12-24" title="24">threat2 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-25" title="25"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb12-26" title="26"><span class="kw">nrow</span>(threat2)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb12-27" title="27"><span class="kw">sum</span>(threat2<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb12-28" title="28"><span class="co"># Retained 96.95% of grants, 95.39% of money</span></a>
<a class="sourceLine" id="cb12-29" title="29"></a>
<a class="sourceLine" id="cb12-30" title="30">threat1 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-31" title="31"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb12-32" title="32"><span class="kw">nrow</span>(threat1)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb12-33" title="33"><span class="kw">sum</span>(threat1<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb12-34" title="34"><span class="co"># Retained 77.55% of grants, 72.19% of money</span></a>
<a class="sourceLine" id="cb12-35" title="35"></a>
<a class="sourceLine" id="cb12-36" title="36">n_threats &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb12-37" title="37">n_threat_grants &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">nrow</span>(threat1), </a>
<a class="sourceLine" id="cb12-38" title="38">                  <span class="kw">nrow</span>(threat2) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(threat1), </a>
<a class="sourceLine" id="cb12-39" title="39">                  <span class="kw">nrow</span>(threat3) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(threat2),</a>
<a class="sourceLine" id="cb12-40" title="40">                  <span class="kw">nrow</span>(threat4) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(threat3))</a>
<a class="sourceLine" id="cb12-41" title="41"></a>
<a class="sourceLine" id="cb12-42" title="42">threats &lt;-<span class="st"> </span><span class="kw">data.frame</span>(n_threats, n_threat_grants)</a>
<a class="sourceLine" id="cb12-43" title="43"><span class="kw">ggplot</span>(threats, <span class="kw">aes</span>(<span class="dt">x =</span> n_threats, <span class="dt">y =</span> n_threat_grants)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-44" title="44"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb12-45" title="45"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;# Grants in Multiple Threat Categories&quot;</span>)</a>
<a class="sourceLine" id="cb12-46" title="46"></a>
<a class="sourceLine" id="cb12-47" title="47"><span class="co">#### &gt;2 category grants (threat_other)</span></a>
<a class="sourceLine" id="cb12-48" title="48"></a>
<a class="sourceLine" id="cb12-49" title="49">threat_other &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-50" title="50"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sum_threat =</span> cat_threat_climate <span class="op">+</span><span class="st"> </span>cat_threat_energytransport <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-51" title="51"><span class="st">           </span>cat_threat_habitat <span class="op">+</span><span class="st"> </span>cat_threat_inv_spec <span class="op">+</span><span class="st"> </span>cat_threat_overexp <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-52" title="52"><span class="st">           </span>cat_threat_pollution) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-53" title="53"><span class="st">  </span><span class="kw">filter</span>(sum_threat <span class="op">&gt;</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb12-54" title="54"></a>
<a class="sourceLine" id="cb12-55" title="55"><span class="co">#### Adding 2-threat categories</span></a>
<a class="sourceLine" id="cb12-56" title="56"></a>
<a class="sourceLine" id="cb12-57" title="57">data.final &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-58" title="58"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cat_threat_climate_energytransport =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-59" title="59">         <span class="dt">cat_threat_climate_habitat =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-60" title="60">         <span class="dt">cat_threat_climate_inv_spec =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-61" title="61">         <span class="dt">cat_threat_climate_overexp =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-62" title="62">         <span class="dt">cat_threat_climate_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-63" title="63">         <span class="dt">cat_threat_energytransport_habitat =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-64" title="64">         <span class="dt">cat_threat_energytransport_inv_spec =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-65" title="65">         <span class="dt">cat_threat_energytransport_overexp =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-66" title="66">         <span class="dt">cat_threat_energytransport_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-67" title="67">         <span class="dt">cat_threat_habitat_inv_spec =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-68" title="68">         <span class="dt">cat_threat_habitat_overexp =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-69" title="69">         <span class="dt">cat_threat_habitat_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-70" title="70">         <span class="dt">cat_threat_inv_spec_overexp =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-71" title="71">         <span class="dt">cat_threat_inv_spec_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-72" title="72">         <span class="dt">cat_threat_overexp_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb12-73" title="73">         <span class="dt">cat_threat_other =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb12-74" title="74"></a>
<a class="sourceLine" id="cb12-75" title="75"></a>
<a class="sourceLine" id="cb12-76" title="76"></a>
<a class="sourceLine" id="cb12-77" title="77"><span class="co">#### Filling Mulitple Threat cells ####</span></a>
<a class="sourceLine" id="cb12-78" title="78"></a>
<a class="sourceLine" id="cb12-79" title="79"><span class="co">## Other Threats (&gt;2 Categories)</span></a>
<a class="sourceLine" id="cb12-80" title="80"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-81" title="81"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp)</a>
<a class="sourceLine" id="cb12-82" title="82"></a>
<a class="sourceLine" id="cb12-83" title="83"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-84" title="84">  <span class="cf">if</span>(<span class="kw">sum</span>(data.final[i,<span class="dv">37</span><span class="op">:</span><span class="dv">42</span>]) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb12-85" title="85">    data.final<span class="op">$</span>cat_threat_other[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb12-86" title="86">    data.final[i, <span class="dv">37</span><span class="op">:</span><span class="dv">42</span>] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb12-87" title="87">  }</a>
<a class="sourceLine" id="cb12-88" title="88">}</a>
<a class="sourceLine" id="cb12-89" title="89"></a>
<a class="sourceLine" id="cb12-90" title="90"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-91" title="91"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp)</a>
<a class="sourceLine" id="cb12-92" title="92"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_other) <span class="co"># matches nrow of threats_other DF</span></a>
<a class="sourceLine" id="cb12-93" title="93"></a>
<a class="sourceLine" id="cb12-94" title="94"></a>
<a class="sourceLine" id="cb12-95" title="95"><span class="co">## Climate + Energy/Transportation</span></a>
<a class="sourceLine" id="cb12-96" title="96"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-97" title="97"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-98" title="98"></a>
<a class="sourceLine" id="cb12-99" title="99"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-100" title="100">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-101" title="101">    data.final<span class="op">$</span>cat_threat_climate_energytransport[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-102" title="102">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_energytransport[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-103" title="103">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-104" title="104">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-105" title="105">  }</a>
<a class="sourceLine" id="cb12-106" title="106">}</a>
<a class="sourceLine" id="cb12-107" title="107"></a>
<a class="sourceLine" id="cb12-108" title="108"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-109" title="109"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-110" title="110"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_energytransport)</a>
<a class="sourceLine" id="cb12-111" title="111"></a>
<a class="sourceLine" id="cb12-112" title="112"></a>
<a class="sourceLine" id="cb12-113" title="113"><span class="co">## Climate + Habitat</span></a>
<a class="sourceLine" id="cb12-114" title="114"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-115" title="115"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-116" title="116"></a>
<a class="sourceLine" id="cb12-117" title="117"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-118" title="118">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-119" title="119">    data.final<span class="op">$</span>cat_threat_climate_habitat[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-120" title="120">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_habitat[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-121" title="121">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-122" title="122">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-123" title="123">  }</a>
<a class="sourceLine" id="cb12-124" title="124">}</a>
<a class="sourceLine" id="cb12-125" title="125"></a>
<a class="sourceLine" id="cb12-126" title="126"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-127" title="127"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-128" title="128"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_habitat)</a>
<a class="sourceLine" id="cb12-129" title="129"></a>
<a class="sourceLine" id="cb12-130" title="130"></a>
<a class="sourceLine" id="cb12-131" title="131"><span class="co">## Climate + Invasive Species</span></a>
<a class="sourceLine" id="cb12-132" title="132"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-133" title="133"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-134" title="134"></a>
<a class="sourceLine" id="cb12-135" title="135"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-136" title="136">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-137" title="137">    data.final<span class="op">$</span>cat_threat_climate_inv_spec[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-138" title="138">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-139" title="139">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-140" title="140">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-141" title="141">  }</a>
<a class="sourceLine" id="cb12-142" title="142">}</a>
<a class="sourceLine" id="cb12-143" title="143"></a>
<a class="sourceLine" id="cb12-144" title="144"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-145" title="145"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-146" title="146"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_inv_spec)</a>
<a class="sourceLine" id="cb12-147" title="147"></a>
<a class="sourceLine" id="cb12-148" title="148"></a>
<a class="sourceLine" id="cb12-149" title="149"><span class="co">## Climate + Overexploitation</span></a>
<a class="sourceLine" id="cb12-150" title="150"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-151" title="151"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-152" title="152"></a>
<a class="sourceLine" id="cb12-153" title="153"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-154" title="154">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-155" title="155">    data.final<span class="op">$</span>cat_threat_climate_overexp[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-156" title="156">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-157" title="157">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-158" title="158">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-159" title="159">  }</a>
<a class="sourceLine" id="cb12-160" title="160">}</a>
<a class="sourceLine" id="cb12-161" title="161"></a>
<a class="sourceLine" id="cb12-162" title="162"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-163" title="163"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-164" title="164"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_overexp)</a>
<a class="sourceLine" id="cb12-165" title="165"></a>
<a class="sourceLine" id="cb12-166" title="166"></a>
<a class="sourceLine" id="cb12-167" title="167"><span class="co">## Climate + Pollution</span></a>
<a class="sourceLine" id="cb12-168" title="168"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-169" title="169"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-170" title="170"></a>
<a class="sourceLine" id="cb12-171" title="171"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-172" title="172">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-173" title="173">    data.final<span class="op">$</span>cat_threat_climate_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-174" title="174">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-175" title="175">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-176" title="176">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-177" title="177">  }</a>
<a class="sourceLine" id="cb12-178" title="178">}</a>
<a class="sourceLine" id="cb12-179" title="179"></a>
<a class="sourceLine" id="cb12-180" title="180"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-181" title="181"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb12-182" title="182"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_pollution)</a>
<a class="sourceLine" id="cb12-183" title="183"></a>
<a class="sourceLine" id="cb12-184" title="184"></a>
<a class="sourceLine" id="cb12-185" title="185"><span class="co">## Energy/Transportation + Habitat</span></a>
<a class="sourceLine" id="cb12-186" title="186"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-187" title="187"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb12-188" title="188"></a>
<a class="sourceLine" id="cb12-189" title="189"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-190" title="190">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-191" title="191">    data.final<span class="op">$</span>cat_threat_energytransport_habitat[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-192" title="192">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport_habitat[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-193" title="193">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-194" title="194">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-195" title="195">  }</a>
<a class="sourceLine" id="cb12-196" title="196">}</a>
<a class="sourceLine" id="cb12-197" title="197"></a>
<a class="sourceLine" id="cb12-198" title="198"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-199" title="199"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb12-200" title="200"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport_habitat)</a>
<a class="sourceLine" id="cb12-201" title="201"></a>
<a class="sourceLine" id="cb12-202" title="202"></a>
<a class="sourceLine" id="cb12-203" title="203"><span class="co">## Energy/Transportation + Invasive Species</span></a>
<a class="sourceLine" id="cb12-204" title="204"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-205" title="205"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb12-206" title="206"></a>
<a class="sourceLine" id="cb12-207" title="207"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-208" title="208">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-209" title="209">    data.final<span class="op">$</span>cat_threat_energytransport_inv_spec[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-210" title="210">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-211" title="211">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-212" title="212">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-213" title="213">  }</a>
<a class="sourceLine" id="cb12-214" title="214">}</a>
<a class="sourceLine" id="cb12-215" title="215"></a>
<a class="sourceLine" id="cb12-216" title="216"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-217" title="217"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb12-218" title="218"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport_inv_spec)</a>
<a class="sourceLine" id="cb12-219" title="219"></a>
<a class="sourceLine" id="cb12-220" title="220"></a>
<a class="sourceLine" id="cb12-221" title="221"><span class="co">## Energy/Transportation + Overexploitation</span></a>
<a class="sourceLine" id="cb12-222" title="222"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-223" title="223"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb12-224" title="224"></a>
<a class="sourceLine" id="cb12-225" title="225"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-226" title="226">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-227" title="227">    data.final<span class="op">$</span>cat_threat_energytransport_overexp[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-228" title="228">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-229" title="229">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-230" title="230">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-231" title="231">  }</a>
<a class="sourceLine" id="cb12-232" title="232">}</a>
<a class="sourceLine" id="cb12-233" title="233"></a>
<a class="sourceLine" id="cb12-234" title="234"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-235" title="235"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb12-236" title="236"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport_overexp)</a>
<a class="sourceLine" id="cb12-237" title="237"></a>
<a class="sourceLine" id="cb12-238" title="238"></a>
<a class="sourceLine" id="cb12-239" title="239"><span class="co">## Energy/Transportation + Pollution</span></a>
<a class="sourceLine" id="cb12-240" title="240"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-241" title="241"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb12-242" title="242"></a>
<a class="sourceLine" id="cb12-243" title="243"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-244" title="244">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-245" title="245">    data.final<span class="op">$</span>cat_threat_energytransport_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-246" title="246">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-247" title="247">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-248" title="248">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-249" title="249">  }</a>
<a class="sourceLine" id="cb12-250" title="250">}</a>
<a class="sourceLine" id="cb12-251" title="251"></a>
<a class="sourceLine" id="cb12-252" title="252"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-253" title="253"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb12-254" title="254"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport_pollution)</a>
<a class="sourceLine" id="cb12-255" title="255"></a>
<a class="sourceLine" id="cb12-256" title="256"></a>
<a class="sourceLine" id="cb12-257" title="257"><span class="co">## Habitat + Invasive Species</span></a>
<a class="sourceLine" id="cb12-258" title="258"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-259" title="259"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb12-260" title="260"></a>
<a class="sourceLine" id="cb12-261" title="261"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-262" title="262">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-263" title="263">    data.final<span class="op">$</span>cat_threat_habitat_inv_spec[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-264" title="264">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-265" title="265">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-266" title="266">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-267" title="267">  }</a>
<a class="sourceLine" id="cb12-268" title="268">}</a>
<a class="sourceLine" id="cb12-269" title="269"></a>
<a class="sourceLine" id="cb12-270" title="270"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-271" title="271"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb12-272" title="272"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat_inv_spec)</a>
<a class="sourceLine" id="cb12-273" title="273"></a>
<a class="sourceLine" id="cb12-274" title="274"></a>
<a class="sourceLine" id="cb12-275" title="275"><span class="co">## Habitat + Overexploitation</span></a>
<a class="sourceLine" id="cb12-276" title="276"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-277" title="277"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb12-278" title="278"></a>
<a class="sourceLine" id="cb12-279" title="279"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-280" title="280">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-281" title="281">    data.final<span class="op">$</span>cat_threat_habitat_overexp[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-282" title="282">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-283" title="283">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-284" title="284">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-285" title="285">  }</a>
<a class="sourceLine" id="cb12-286" title="286">}</a>
<a class="sourceLine" id="cb12-287" title="287"></a>
<a class="sourceLine" id="cb12-288" title="288"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-289" title="289"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb12-290" title="290"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat_overexp)</a>
<a class="sourceLine" id="cb12-291" title="291"></a>
<a class="sourceLine" id="cb12-292" title="292"></a>
<a class="sourceLine" id="cb12-293" title="293"><span class="co">## Habitat + Pollution</span></a>
<a class="sourceLine" id="cb12-294" title="294"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-295" title="295"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb12-296" title="296"></a>
<a class="sourceLine" id="cb12-297" title="297"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-298" title="298">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-299" title="299">    data.final<span class="op">$</span>cat_threat_habitat_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-300" title="300">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-301" title="301">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-302" title="302">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-303" title="303">  }</a>
<a class="sourceLine" id="cb12-304" title="304">}</a>
<a class="sourceLine" id="cb12-305" title="305"></a>
<a class="sourceLine" id="cb12-306" title="306"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-307" title="307"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb12-308" title="308"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat_pollution)</a>
<a class="sourceLine" id="cb12-309" title="309"></a>
<a class="sourceLine" id="cb12-310" title="310"></a>
<a class="sourceLine" id="cb12-311" title="311"><span class="co">## Invasive Species + Overexploitation</span></a>
<a class="sourceLine" id="cb12-312" title="312"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-313" title="313"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec)</a>
<a class="sourceLine" id="cb12-314" title="314"></a>
<a class="sourceLine" id="cb12-315" title="315"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-316" title="316">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-317" title="317">    data.final<span class="op">$</span>cat_threat_inv_spec_overexp[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-318" title="318">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_inv_spec_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-319" title="319">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-320" title="320">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-321" title="321">  }</a>
<a class="sourceLine" id="cb12-322" title="322">}</a>
<a class="sourceLine" id="cb12-323" title="323"></a>
<a class="sourceLine" id="cb12-324" title="324"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-325" title="325"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec)</a>
<a class="sourceLine" id="cb12-326" title="326"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec_overexp)</a>
<a class="sourceLine" id="cb12-327" title="327"></a>
<a class="sourceLine" id="cb12-328" title="328"></a>
<a class="sourceLine" id="cb12-329" title="329"><span class="co">## Invasive Species + Pollution</span></a>
<a class="sourceLine" id="cb12-330" title="330"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-331" title="331"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec)</a>
<a class="sourceLine" id="cb12-332" title="332"></a>
<a class="sourceLine" id="cb12-333" title="333"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-334" title="334">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-335" title="335">    data.final<span class="op">$</span>cat_threat_inv_spec_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-336" title="336">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_inv_spec_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-337" title="337">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-338" title="338">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-339" title="339">  }</a>
<a class="sourceLine" id="cb12-340" title="340">}</a>
<a class="sourceLine" id="cb12-341" title="341"></a>
<a class="sourceLine" id="cb12-342" title="342"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-343" title="343"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec)</a>
<a class="sourceLine" id="cb12-344" title="344"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec_pollution)</a>
<a class="sourceLine" id="cb12-345" title="345"></a>
<a class="sourceLine" id="cb12-346" title="346"></a>
<a class="sourceLine" id="cb12-347" title="347"><span class="co">## Overexploitation + Pollution</span></a>
<a class="sourceLine" id="cb12-348" title="348"><span class="co">#test</span></a>
<a class="sourceLine" id="cb12-349" title="349"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp)</a>
<a class="sourceLine" id="cb12-350" title="350"></a>
<a class="sourceLine" id="cb12-351" title="351"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb12-352" title="352">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-353" title="353">    data.final<span class="op">$</span>cat_threat_overexp_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb12-354" title="354">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_overexp_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb12-355" title="355">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-356" title="356">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb12-357" title="357">  }</a>
<a class="sourceLine" id="cb12-358" title="358">}</a>
<a class="sourceLine" id="cb12-359" title="359"></a>
<a class="sourceLine" id="cb12-360" title="360"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb12-361" title="361"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp)</a>
<a class="sourceLine" id="cb12-362" title="362"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp_pollution)</a></code></pre></div>
</div>
<div id="multi-category-filtering-taxa-category" class="section level3">
<h3><span class="header-section-number">4.2.5</span> Multi-category Filtering: Taxa Category</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">taxa &lt;-<span class="st"> </span>data.final[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">30</span><span class="op">:</span><span class="dv">36</span>)]</a>
<a class="sourceLine" id="cb13-2" title="2"></a>
<a class="sourceLine" id="cb13-3" title="3">taxa_other &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sum_taxa =</span> <span class="kw">rowSums</span>(.[<span class="dv">30</span><span class="op">:</span><span class="dv">36</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="st">  </span><span class="kw">filter</span>(sum_taxa <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb13-6" title="6"></a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">## Adding 2-taxa categories and other</span></a>
<a class="sourceLine" id="cb13-9" title="9">data.final &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cat_taxa_amphibian_bird =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-11" title="11">         <span class="dt">cat_taxa_amphibian_fish =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-12" title="12">         <span class="dt">cat_taxa_amphibian_invertebrate =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-13" title="13">         <span class="dt">cat_taxa_amphibian_mammal =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-14" title="14">         <span class="dt">cat_taxa_amphibian_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-15" title="15">         <span class="dt">cat_taxa_amphibian_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-16" title="16">         <span class="dt">cat_taxa_bird_fish =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-17" title="17">         <span class="dt">cat_taxa_bird_invertebrate =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-18" title="18">         <span class="dt">cat_taxa_bird_mammal =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-19" title="19">         <span class="dt">cat_taxa_bird_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-20" title="20">         <span class="dt">cat_taxa_bird_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-21" title="21">         <span class="dt">cat_taxa_fish_invertebrate =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-22" title="22">         <span class="dt">cat_taxa_fish_mammal =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-23" title="23">         <span class="dt">cat_taxa_fish_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-24" title="24">         <span class="dt">cat_taxa_fish_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-25" title="25">         <span class="dt">cat_taxa_invertebrate_mammal =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-26" title="26">         <span class="dt">cat_taxa_invertebrate_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-27" title="27">         <span class="dt">cat_taxa_invertebrate_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-28" title="28">         <span class="dt">cat_taxa_mammal_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-29" title="29">         <span class="dt">cat_taxa_mammal_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-30" title="30">         <span class="dt">cat_taxa_plant_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-31" title="31">         <span class="dt">cat_taxa_other =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb13-32" title="32"></a>
<a class="sourceLine" id="cb13-33" title="33"><span class="co">#### Filling Multiple Taxa cells ####</span></a>
<a class="sourceLine" id="cb13-34" title="34"></a>
<a class="sourceLine" id="cb13-35" title="35"><span class="co">## Other Taxa (&gt;2 classifications)</span></a>
<a class="sourceLine" id="cb13-36" title="36"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-37" title="37"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant)</a>
<a class="sourceLine" id="cb13-38" title="38"></a>
<a class="sourceLine" id="cb13-39" title="39"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)) {</a>
<a class="sourceLine" id="cb13-40" title="40">  <span class="cf">if</span>(<span class="kw">sum</span>(data.final[i,<span class="dv">30</span><span class="op">:</span><span class="dv">36</span>]) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb13-41" title="41">    data.final<span class="op">$</span>cat_taxa_other[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb13-42" title="42">    data.final[i,<span class="dv">30</span><span class="op">:</span><span class="dv">36</span>] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb13-43" title="43">  }</a>
<a class="sourceLine" id="cb13-44" title="44">}</a>
<a class="sourceLine" id="cb13-45" title="45"></a>
<a class="sourceLine" id="cb13-46" title="46"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-47" title="47"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant)</a>
<a class="sourceLine" id="cb13-48" title="48"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_other) <span class="co"># matches nrow of taxa_other DF</span></a>
<a class="sourceLine" id="cb13-49" title="49"></a>
<a class="sourceLine" id="cb13-50" title="50"></a>
<a class="sourceLine" id="cb13-51" title="51"><span class="co">## amphibian + bird</span></a>
<a class="sourceLine" id="cb13-52" title="52"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-53" title="53"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-54" title="54"></a>
<a class="sourceLine" id="cb13-55" title="55"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-56" title="56">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-57" title="57">    data.final<span class="op">$</span>cat_taxa_amphibian_bird[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-58" title="58">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_bird[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-59" title="59">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-60" title="60">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-61" title="61">  }</a>
<a class="sourceLine" id="cb13-62" title="62">}</a>
<a class="sourceLine" id="cb13-63" title="63"></a>
<a class="sourceLine" id="cb13-64" title="64"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-65" title="65"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-66" title="66"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_bird)</a>
<a class="sourceLine" id="cb13-67" title="67"></a>
<a class="sourceLine" id="cb13-68" title="68"></a>
<a class="sourceLine" id="cb13-69" title="69"><span class="co">## amphibian + fish</span></a>
<a class="sourceLine" id="cb13-70" title="70"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-71" title="71"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-72" title="72"></a>
<a class="sourceLine" id="cb13-73" title="73"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-74" title="74">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-75" title="75">    data.final<span class="op">$</span>cat_taxa_amphibian_fish[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-76" title="76">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_fish[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-77" title="77">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-78" title="78">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-79" title="79">  }</a>
<a class="sourceLine" id="cb13-80" title="80">}</a>
<a class="sourceLine" id="cb13-81" title="81"></a>
<a class="sourceLine" id="cb13-82" title="82"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-83" title="83"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-84" title="84"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_fish)</a>
<a class="sourceLine" id="cb13-85" title="85"></a>
<a class="sourceLine" id="cb13-86" title="86"></a>
<a class="sourceLine" id="cb13-87" title="87"><span class="co">## amphibian + invertebrate</span></a>
<a class="sourceLine" id="cb13-88" title="88"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-89" title="89"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-90" title="90"></a>
<a class="sourceLine" id="cb13-91" title="91"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-92" title="92">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-93" title="93">    data.final<span class="op">$</span>cat_taxa_amphibian_invertebrate[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-94" title="94">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-95" title="95">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-96" title="96">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-97" title="97">  }</a>
<a class="sourceLine" id="cb13-98" title="98">}</a>
<a class="sourceLine" id="cb13-99" title="99"></a>
<a class="sourceLine" id="cb13-100" title="100"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-101" title="101"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-102" title="102"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_invertebrate)</a>
<a class="sourceLine" id="cb13-103" title="103"></a>
<a class="sourceLine" id="cb13-104" title="104"></a>
<a class="sourceLine" id="cb13-105" title="105"><span class="co">## amphibian + mammal</span></a>
<a class="sourceLine" id="cb13-106" title="106"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-107" title="107"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-108" title="108"></a>
<a class="sourceLine" id="cb13-109" title="109"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-110" title="110">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-111" title="111">    data.final<span class="op">$</span>cat_taxa_amphibian_mammal[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-112" title="112">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-113" title="113">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-114" title="114">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-115" title="115">  }</a>
<a class="sourceLine" id="cb13-116" title="116">}</a>
<a class="sourceLine" id="cb13-117" title="117"></a>
<a class="sourceLine" id="cb13-118" title="118"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-119" title="119"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-120" title="120"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_mammal)</a>
<a class="sourceLine" id="cb13-121" title="121"></a>
<a class="sourceLine" id="cb13-122" title="122"></a>
<a class="sourceLine" id="cb13-123" title="123"><span class="co">## amphibian + plant</span></a>
<a class="sourceLine" id="cb13-124" title="124"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-125" title="125"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-126" title="126"></a>
<a class="sourceLine" id="cb13-127" title="127"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-128" title="128">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-129" title="129">    data.final<span class="op">$</span>cat_taxa_amphibian_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-130" title="130">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-131" title="131">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-132" title="132">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-133" title="133">  }</a>
<a class="sourceLine" id="cb13-134" title="134">}</a>
<a class="sourceLine" id="cb13-135" title="135"></a>
<a class="sourceLine" id="cb13-136" title="136"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-137" title="137"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-138" title="138"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_plant)</a>
<a class="sourceLine" id="cb13-139" title="139"></a>
<a class="sourceLine" id="cb13-140" title="140"></a>
<a class="sourceLine" id="cb13-141" title="141"><span class="co">## amphibian + reptile</span></a>
<a class="sourceLine" id="cb13-142" title="142"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-143" title="143"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-144" title="144"></a>
<a class="sourceLine" id="cb13-145" title="145"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-146" title="146">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-147" title="147">    data.final<span class="op">$</span>cat_taxa_amphibian_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-148" title="148">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-149" title="149">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-150" title="150">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-151" title="151">  }</a>
<a class="sourceLine" id="cb13-152" title="152">}</a>
<a class="sourceLine" id="cb13-153" title="153"></a>
<a class="sourceLine" id="cb13-154" title="154"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-155" title="155"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb13-156" title="156"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_reptile)</a>
<a class="sourceLine" id="cb13-157" title="157"></a>
<a class="sourceLine" id="cb13-158" title="158"></a>
<a class="sourceLine" id="cb13-159" title="159"><span class="co">## bird + fish</span></a>
<a class="sourceLine" id="cb13-160" title="160"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-161" title="161"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-162" title="162"></a>
<a class="sourceLine" id="cb13-163" title="163"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-164" title="164">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-165" title="165">    data.final<span class="op">$</span>cat_taxa_bird_fish[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-166" title="166">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_fish[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-167" title="167">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-168" title="168">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-169" title="169">  }</a>
<a class="sourceLine" id="cb13-170" title="170">}</a>
<a class="sourceLine" id="cb13-171" title="171"></a>
<a class="sourceLine" id="cb13-172" title="172"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-173" title="173"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-174" title="174"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_fish)</a>
<a class="sourceLine" id="cb13-175" title="175"></a>
<a class="sourceLine" id="cb13-176" title="176"></a>
<a class="sourceLine" id="cb13-177" title="177"><span class="co">## bird + invertebrate</span></a>
<a class="sourceLine" id="cb13-178" title="178"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-179" title="179"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-180" title="180"></a>
<a class="sourceLine" id="cb13-181" title="181"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-182" title="182">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-183" title="183">    data.final<span class="op">$</span>cat_taxa_bird_invertebrate[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-184" title="184">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-185" title="185">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-186" title="186">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-187" title="187">  }</a>
<a class="sourceLine" id="cb13-188" title="188">}</a>
<a class="sourceLine" id="cb13-189" title="189"></a>
<a class="sourceLine" id="cb13-190" title="190"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-191" title="191"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-192" title="192"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_invertebrate)</a>
<a class="sourceLine" id="cb13-193" title="193"></a>
<a class="sourceLine" id="cb13-194" title="194"></a>
<a class="sourceLine" id="cb13-195" title="195"><span class="co">## bird + mammal</span></a>
<a class="sourceLine" id="cb13-196" title="196"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-197" title="197"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-198" title="198"></a>
<a class="sourceLine" id="cb13-199" title="199"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-200" title="200">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-201" title="201">    data.final<span class="op">$</span>cat_taxa_bird_mammal[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-202" title="202">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-203" title="203">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-204" title="204">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-205" title="205">  }</a>
<a class="sourceLine" id="cb13-206" title="206">}</a>
<a class="sourceLine" id="cb13-207" title="207"></a>
<a class="sourceLine" id="cb13-208" title="208"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-209" title="209"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-210" title="210"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_mammal)</a>
<a class="sourceLine" id="cb13-211" title="211"></a>
<a class="sourceLine" id="cb13-212" title="212"></a>
<a class="sourceLine" id="cb13-213" title="213"><span class="co">## bird + plant</span></a>
<a class="sourceLine" id="cb13-214" title="214"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-215" title="215"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-216" title="216"></a>
<a class="sourceLine" id="cb13-217" title="217"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-218" title="218">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-219" title="219">    data.final<span class="op">$</span>cat_taxa_bird_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-220" title="220">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-221" title="221">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-222" title="222">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-223" title="223">  }</a>
<a class="sourceLine" id="cb13-224" title="224">}</a>
<a class="sourceLine" id="cb13-225" title="225"></a>
<a class="sourceLine" id="cb13-226" title="226"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-227" title="227"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-228" title="228"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_plant)</a>
<a class="sourceLine" id="cb13-229" title="229"></a>
<a class="sourceLine" id="cb13-230" title="230"></a>
<a class="sourceLine" id="cb13-231" title="231"><span class="co">## bird + reptile</span></a>
<a class="sourceLine" id="cb13-232" title="232"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-233" title="233"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-234" title="234"></a>
<a class="sourceLine" id="cb13-235" title="235"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-236" title="236">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-237" title="237">    data.final<span class="op">$</span>cat_taxa_bird_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-238" title="238">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-239" title="239">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-240" title="240">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-241" title="241">  }</a>
<a class="sourceLine" id="cb13-242" title="242">}</a>
<a class="sourceLine" id="cb13-243" title="243"></a>
<a class="sourceLine" id="cb13-244" title="244"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-245" title="245"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb13-246" title="246"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_reptile)</a>
<a class="sourceLine" id="cb13-247" title="247"></a>
<a class="sourceLine" id="cb13-248" title="248"></a>
<a class="sourceLine" id="cb13-249" title="249"><span class="co">## fish + invertebrate</span></a>
<a class="sourceLine" id="cb13-250" title="250"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-251" title="251"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb13-252" title="252"></a>
<a class="sourceLine" id="cb13-253" title="253"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-254" title="254">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-255" title="255">    data.final<span class="op">$</span>cat_taxa_fish_invertebrate[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-256" title="256">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-257" title="257">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-258" title="258">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-259" title="259">  }</a>
<a class="sourceLine" id="cb13-260" title="260">}</a>
<a class="sourceLine" id="cb13-261" title="261"></a>
<a class="sourceLine" id="cb13-262" title="262"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-263" title="263"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb13-264" title="264"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish_invertebrate)</a>
<a class="sourceLine" id="cb13-265" title="265"></a>
<a class="sourceLine" id="cb13-266" title="266"></a>
<a class="sourceLine" id="cb13-267" title="267"><span class="co">## fish + mammal</span></a>
<a class="sourceLine" id="cb13-268" title="268"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-269" title="269"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb13-270" title="270"></a>
<a class="sourceLine" id="cb13-271" title="271"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-272" title="272">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-273" title="273">    data.final<span class="op">$</span>cat_taxa_fish_mammal[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-274" title="274">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-275" title="275">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-276" title="276">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-277" title="277">  }</a>
<a class="sourceLine" id="cb13-278" title="278">}</a>
<a class="sourceLine" id="cb13-279" title="279"></a>
<a class="sourceLine" id="cb13-280" title="280"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-281" title="281"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb13-282" title="282"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish_mammal)</a>
<a class="sourceLine" id="cb13-283" title="283"></a>
<a class="sourceLine" id="cb13-284" title="284"></a>
<a class="sourceLine" id="cb13-285" title="285"><span class="co">## fish + plant</span></a>
<a class="sourceLine" id="cb13-286" title="286"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-287" title="287"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb13-288" title="288"></a>
<a class="sourceLine" id="cb13-289" title="289"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-290" title="290">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-291" title="291">    data.final<span class="op">$</span>cat_taxa_fish_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-292" title="292">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-293" title="293">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-294" title="294">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-295" title="295">  }</a>
<a class="sourceLine" id="cb13-296" title="296">}</a>
<a class="sourceLine" id="cb13-297" title="297"></a>
<a class="sourceLine" id="cb13-298" title="298"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-299" title="299"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb13-300" title="300"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish_plant)</a>
<a class="sourceLine" id="cb13-301" title="301"></a>
<a class="sourceLine" id="cb13-302" title="302"></a>
<a class="sourceLine" id="cb13-303" title="303"><span class="co">## fish + reptile</span></a>
<a class="sourceLine" id="cb13-304" title="304"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-305" title="305"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb13-306" title="306"></a>
<a class="sourceLine" id="cb13-307" title="307"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-308" title="308">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-309" title="309">    data.final<span class="op">$</span>cat_taxa_fish_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-310" title="310">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-311" title="311">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-312" title="312">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-313" title="313">  }</a>
<a class="sourceLine" id="cb13-314" title="314">}</a>
<a class="sourceLine" id="cb13-315" title="315"></a>
<a class="sourceLine" id="cb13-316" title="316"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-317" title="317"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb13-318" title="318"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish_reptile)</a>
<a class="sourceLine" id="cb13-319" title="319"></a>
<a class="sourceLine" id="cb13-320" title="320"></a>
<a class="sourceLine" id="cb13-321" title="321"><span class="co">## invertebrate + mammal</span></a>
<a class="sourceLine" id="cb13-322" title="322"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-323" title="323"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb13-324" title="324"></a>
<a class="sourceLine" id="cb13-325" title="325"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-326" title="326">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-327" title="327">    data.final<span class="op">$</span>cat_taxa_invertebrate_mammal[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-328" title="328">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-329" title="329">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-330" title="330">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-331" title="331">  }</a>
<a class="sourceLine" id="cb13-332" title="332">}</a>
<a class="sourceLine" id="cb13-333" title="333"></a>
<a class="sourceLine" id="cb13-334" title="334"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-335" title="335"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb13-336" title="336"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_mammal)</a>
<a class="sourceLine" id="cb13-337" title="337"></a>
<a class="sourceLine" id="cb13-338" title="338"></a>
<a class="sourceLine" id="cb13-339" title="339"><span class="co">## invertebrate + plant</span></a>
<a class="sourceLine" id="cb13-340" title="340"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-341" title="341"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb13-342" title="342"></a>
<a class="sourceLine" id="cb13-343" title="343"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-344" title="344">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-345" title="345">    data.final<span class="op">$</span>cat_taxa_invertebrate_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-346" title="346">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-347" title="347">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-348" title="348">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-349" title="349">  }</a>
<a class="sourceLine" id="cb13-350" title="350">}</a>
<a class="sourceLine" id="cb13-351" title="351"></a>
<a class="sourceLine" id="cb13-352" title="352"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-353" title="353"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb13-354" title="354"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_plant)</a>
<a class="sourceLine" id="cb13-355" title="355"></a>
<a class="sourceLine" id="cb13-356" title="356"></a>
<a class="sourceLine" id="cb13-357" title="357"><span class="co">## invertebrate + reptile</span></a>
<a class="sourceLine" id="cb13-358" title="358"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-359" title="359"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb13-360" title="360"></a>
<a class="sourceLine" id="cb13-361" title="361"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-362" title="362">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-363" title="363">    data.final<span class="op">$</span>cat_taxa_invertebrate_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-364" title="364">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-365" title="365">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-366" title="366">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-367" title="367">  }</a>
<a class="sourceLine" id="cb13-368" title="368">}</a>
<a class="sourceLine" id="cb13-369" title="369"></a>
<a class="sourceLine" id="cb13-370" title="370"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-371" title="371"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb13-372" title="372"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_reptile)</a>
<a class="sourceLine" id="cb13-373" title="373"></a>
<a class="sourceLine" id="cb13-374" title="374"></a>
<a class="sourceLine" id="cb13-375" title="375"><span class="co">## mammal + plant</span></a>
<a class="sourceLine" id="cb13-376" title="376"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-377" title="377"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal)</a>
<a class="sourceLine" id="cb13-378" title="378"></a>
<a class="sourceLine" id="cb13-379" title="379"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-380" title="380">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-381" title="381">    data.final<span class="op">$</span>cat_taxa_mammal_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-382" title="382">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_mammal_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-383" title="383">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-384" title="384">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-385" title="385">  }</a>
<a class="sourceLine" id="cb13-386" title="386">}</a>
<a class="sourceLine" id="cb13-387" title="387"></a>
<a class="sourceLine" id="cb13-388" title="388"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-389" title="389"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal)</a>
<a class="sourceLine" id="cb13-390" title="390"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal_plant)</a>
<a class="sourceLine" id="cb13-391" title="391"></a>
<a class="sourceLine" id="cb13-392" title="392"></a>
<a class="sourceLine" id="cb13-393" title="393"><span class="co">## mammal + reptile</span></a>
<a class="sourceLine" id="cb13-394" title="394"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-395" title="395"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal)</a>
<a class="sourceLine" id="cb13-396" title="396"></a>
<a class="sourceLine" id="cb13-397" title="397"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-398" title="398">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-399" title="399">    data.final<span class="op">$</span>cat_taxa_mammal_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-400" title="400">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_mammal_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-401" title="401">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-402" title="402">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-403" title="403">  }</a>
<a class="sourceLine" id="cb13-404" title="404">}</a>
<a class="sourceLine" id="cb13-405" title="405"></a>
<a class="sourceLine" id="cb13-406" title="406"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-407" title="407"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal)</a>
<a class="sourceLine" id="cb13-408" title="408"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal_reptile)</a>
<a class="sourceLine" id="cb13-409" title="409"></a>
<a class="sourceLine" id="cb13-410" title="410"></a>
<a class="sourceLine" id="cb13-411" title="411"><span class="co">## plant + reptile</span></a>
<a class="sourceLine" id="cb13-412" title="412"><span class="co">#test</span></a>
<a class="sourceLine" id="cb13-413" title="413"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant)</a>
<a class="sourceLine" id="cb13-414" title="414"></a>
<a class="sourceLine" id="cb13-415" title="415"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb13-416" title="416">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-417" title="417">    data.final<span class="op">$</span>cat_taxa_plant_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb13-418" title="418">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_plant_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb13-419" title="419">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-420" title="420">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb13-421" title="421">  }</a>
<a class="sourceLine" id="cb13-422" title="422">}</a>
<a class="sourceLine" id="cb13-423" title="423"></a>
<a class="sourceLine" id="cb13-424" title="424"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb13-425" title="425"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant)</a>
<a class="sourceLine" id="cb13-426" title="426"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant_reptile)</a></code></pre></div>
</div>
<div id="export-multi-category-data-for-analysis-and-visualization" class="section level3">
<h3><span class="header-section-number">4.2.6</span> Export Multi-Category Data for Analysis and Visualization</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">write_csv</span>(data.final, <span class="st">&quot;~/Desktop/master_output_data_analysis_v15_filtered.csv&quot;</span>)</a></code></pre></div>

</div>
</div>
<div id="preparing-a-final-datafame-for-analysis-of-threats-taxonomic-groups-and-proportion-of-funding" class="section level2">
<h2><span class="header-section-number">4.3</span> Preparing a final datafame for analysis of threats, taxonomic groups and proportion of funding</h2>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb15-1" title="1"></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb15-3" title="3"><span class="im">import</span> numpy <span class="im">as</span> np</a>
<a class="sourceLine" id="cb15-4" title="4"><span class="im">import</span> math</a>
<a class="sourceLine" id="cb15-5" title="5"><span class="im">import</span> tqdm</a>
<a class="sourceLine" id="cb15-6" title="6"></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MultiLabelBinarizer</a>
<a class="sourceLine" id="cb15-8" title="8">mlb <span class="op">=</span> MultiLabelBinarizer()</a>
<a class="sourceLine" id="cb15-9" title="9">data <span class="op">=</span> pd.read_csv(<span class="st">&#39;~data/all-grants.csv&#39;</span>)</a>
<a class="sourceLine" id="cb15-10" title="10">preproc_ph <span class="op">=</span> pd.read_csv(<span class="st">&#39;~data/list-of-preprocessing-phrases.csv&#39;</span>)</a>
<a class="sourceLine" id="cb15-11" title="11"></a>
<a class="sourceLine" id="cb15-12" title="12">preproc_phrases <span class="op">=</span> <span class="bu">list</span>(preproc_ph.Phrases)</a>
<a class="sourceLine" id="cb15-13" title="13">data <span class="op">=</span> data.drop([ele <span class="cf">for</span> ele <span class="kw">in</span> data.columns.to_list() <span class="cf">if</span> ele <span class="kw">in</span> [<span class="st">&#39;X&#39;</span>, <span class="st">&#39;Random Sort&#39;</span>, <span class="st">&#39;Unnamed: 0&#39;</span>]], axis<span class="op">=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb15-14" title="14">data <span class="op">=</span> data.dropna(subset<span class="op">=</span>[<span class="st">&#39;Description&#39;</span>])</a>
<a class="sourceLine" id="cb15-15" title="15"></a>
<a class="sourceLine" id="cb15-16" title="16"><span class="cf">for</span> phrase <span class="kw">in</span> preproc_phrases[:<span class="dv">6</span>]:</a>
<a class="sourceLine" id="cb15-17" title="17">    data <span class="op">=</span> data[<span class="op">~</span>data.Description.<span class="bu">str</span>.contains(phrase)]</a>
<a class="sourceLine" id="cb15-18" title="18"></a>
<a class="sourceLine" id="cb15-19" title="19"><span class="cf">for</span> phrase <span class="kw">in</span> preproc_phrases[<span class="dv">6</span>:]:</a>
<a class="sourceLine" id="cb15-20" title="20">    data <span class="op">=</span> data[data.Description.<span class="bu">str</span>.lower() <span class="op">!=</span> phrase]</a>
<a class="sourceLine" id="cb15-21" title="21"></a>
<a class="sourceLine" id="cb15-22" title="22">data <span class="op">=</span> data.reset_index(drop<span class="op">=</span><span class="va">True</span>)</a>
<a class="sourceLine" id="cb15-23" title="23">data_class <span class="op">=</span> pd.read_csv(<span class="st">&#39;~data/output-grants-filtered.csv&#39;</span>)</a>
<a class="sourceLine" id="cb15-24" title="24">data_class <span class="op">=</span> data_class.fillna(<span class="st">&#39;-&#39;</span>)</a>
<a class="sourceLine" id="cb15-25" title="25"></a>
<a class="sourceLine" id="cb15-26" title="26">pbar <span class="op">=</span> tqdm.tqdm(total<span class="op">=</span><span class="bu">len</span>(data))</a>
<a class="sourceLine" id="cb15-27" title="27"><span class="cf">for</span> idx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(data)):</a>
<a class="sourceLine" id="cb15-28" title="28">    <span class="cf">for</span> col <span class="kw">in</span> data_class.columns[<span class="dv">1</span>:]:</a>
<a class="sourceLine" id="cb15-29" title="29">        <span class="cf">if</span> <span class="bu">type</span>(data_class[col][idx]) <span class="op">==</span> <span class="bu">str</span>:</a>
<a class="sourceLine" id="cb15-30" title="30">            data_class[col][idx] <span class="op">=</span> <span class="bu">list</span>(<span class="bu">set</span>(data_class[col][idx].split(<span class="st">&#39;|&#39;</span>)))</a>
<a class="sourceLine" id="cb15-31" title="31">    pbar.update(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb15-32" title="32">pbar.close()</a>
<a class="sourceLine" id="cb15-33" title="33">df_final <span class="op">=</span> pd.concat([data, data_class[[<span class="st">&#39;Keywords&#39;</span>, <span class="st">&#39;Filtered_Categories&#39;</span>,</a>
<a class="sourceLine" id="cb15-34" title="34">                                        <span class="st">&#39;Bio_keywords&#39;</span>]]],</a>
<a class="sourceLine" id="cb15-35" title="35">                     axis<span class="op">=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb15-36" title="36">df_final <span class="op">=</span> df_final.join(pd.DataFrame(mlb.fit_transform(df_final.pop(<span class="st">&#39;Filtered_Categories&#39;</span>)),columns<span class="op">=</span>[<span class="st">&#39;cat_&#39;</span> <span class="op">+</span> x <span class="cf">for</span> x <span class="kw">in</span> mlb.classes_],index<span class="op">=</span>df_final.index))</a>
<a class="sourceLine" id="cb15-37" title="37">df_final <span class="op">=</span> df_final.join(pd.DataFrame(mlb.fit_transform(df_final.pop(<span class="st">&#39;Bio_keywords&#39;</span>)),columns<span class="op">=</span>[<span class="st">&#39;bio_key_&#39;</span> <span class="op">+</span> x <span class="cf">for</span> x <span class="kw">in</span> mlb.classes_],index<span class="op">=</span>df_final.index))</a>
<a class="sourceLine" id="cb15-38" title="38"></a>
<a class="sourceLine" id="cb15-39" title="39">df_final <span class="op">=</span> df_final.drop([<span class="st">&#39;cat_-&#39;</span>, <span class="st">&#39;bio_key_-&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb15-40" title="40">df_final.to_csv(<span class="st">&#39;~data/output-grants-for-analysis.csv&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="filtering.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-analysis-and-visualization-datavis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vjjan91/conservation-spending/edit/master/03-multiCatFilter.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
